15:15:22,021 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
15:15:22,036 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
15:15:22,047 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:15:22,053 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:15:22,054 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
15:15:22,061 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:15:22,063 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:15:22,065 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
15:15:22,070 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:15:22,073 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:15:22,091 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:15:22,097 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:15:22,111 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
15:15:22,149 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
15:15:22,149 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
15:15:22,172 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
15:15:22,172 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : int[],java.lang.String
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,byte[],java.lang.String
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
15:15:22,173 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.Long,java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.lang.Long,java.lang.String,java.util.Date
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.lang.Long,java.lang.String,java.util.Date
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.lang.Long,java.util.Date,java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Long,java.lang.Double,java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.lang.Long,java.sql.Timestamp,java.util.Date,java.lang.String
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.sql.Date,java.lang.String,java.util.Date
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.sql.Timestamp,java.lang.String,java.util.Date
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.lang.Long,java.lang.String,java.util.Date,java.sql.Time
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.sql.Date,int[],java.lang.String,java.util.Date
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.sql.Timestamp,java.lang.String,java.util.Date
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.Long,java.lang.String,java.sql.Time
15:15:22,174 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : int[],java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.String,java.lang.Integer
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.sql.Date,int[],java.lang.String,java.util.Date
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : [Ljava.lang.Object;,java.sql.Timestamp,java.lang.String,java.util.Date
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.Long,java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
15:15:22,175 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
15:15:22,176 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
15:15:22,204 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
15:15:22,218 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
15:15:22,218 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
15:15:22,219 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
15:15:22,219 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
15:15:22,219 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
15:15:22,219 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
15:15:22,220 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,221 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:15:22,222 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
15:15:22,222 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
15:15:22,223 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
15:15:22,224 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
15:15:22,294 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
15:15:22,295 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
15:15:22,295 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
15:15:22,303 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
15:15:22,493 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2c34f934 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
15:15:22,519 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
15:15:22,520 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
15:15:22,520 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
15:15:22,520 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
15:15:22,520 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:15:22,520 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:15:22,520 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:15:22,537 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507196722527`.`UNUSED`" added to internal representation of table.
15:15:22,540 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507196722527`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
15:15:22,566 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 26 ms
15:15:22,582 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
15:15:22,582 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507196722527` CASCADE
15:15:22,592 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 9 ms
15:15:22,594 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
15:15:22,594 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
15:15:22,594 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
15:15:22,594 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
15:15:22,594 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
15:15:22,595 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
15:15:22,595 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
15:15:22,595 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:15:22,595 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
15:15:22,595 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
15:15:22,595 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
15:15:22,596 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:15:22,596 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:15:22,596 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
15:15:22,596 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
15:15:22,596 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
15:15:22,596 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
15:15:22,597 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15:15:22,597 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
15:15:22,597 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
15:15:22,597 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
15:15:22,597 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
15:15:22,597 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:15:22,598 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2c34f934 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:22,599 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
15:15:22,605 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
15:15:22,617 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
15:15:22,617 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
15:15:22,618 (main) DEBUG [DataNucleus.Persistence] - ================================================
15:15:22,647 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@23529fee" with txn="org.datanucleus.TransactionImpl@3f197a46"
15:15:22,915 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:15:22,928 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 13 ms
15:15:22,928 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
15:15:22,929 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:15:22,940 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
15:15:22,940 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
15:15:22,941 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:15:22,942 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
15:15:22,942 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
15:15:22,943 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
15:15:22,944 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:15:22,945 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
15:15:22,945 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
15:15:22,945 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
15:15:22,945 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:22,945 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:15:22,945 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
15:15:22,947 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@26abb146 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@72c8e7b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
15:15:22,947 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@72c8e7b" with isolation "serializable"
15:15:22,948 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned no table
15:15:22,948 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DOMAIN_EVENT`
(
    `GLOBALINDEX` BIGINT NOT NULL,
    `AGGREGATEIDENTIFIER` VARCHAR(255) BINARY NULL,
    `EVENTIDENTIFIER` VARCHAR(255) BINARY NULL,
    `PAYLOAD` VARCHAR(255) BINARY NULL,
    `PAYLOADREVISION` VARCHAR(255) BINARY NULL,
    `PAYLOADTYPE` VARCHAR(255) BINARY NULL,
    `SEQUENCENUMBER` BIGINT NULL,
    `TIMESTAMP` TIMESTAMP NULL,
    `TYPE` VARCHAR(255) BINARY NULL,
    CONSTRAINT `DOMAIN_EVENT_PK` PRIMARY KEY (`GLOBALINDEX`)
) ENGINE=INNODB
15:15:22,983 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 35 ms
15:15:23,009 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
15:15:23,058 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 50 ms
15:15:23,060 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
15:15:23,066 (main) DEBUG [DataNucleus.Datastore.Schema] - ALTER TABLE `DOMAIN_EVENT` ADD CONSTRAINT `UNIQUE_EVENT_CONST` UNIQUE (`EVENTIDENTIFIER`)
15:15:23,080 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 14 ms
15:15:23,081 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@72c8e7b"
15:15:23,082 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@72c8e7b"
15:15:23,082 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@26abb146 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@72c8e7b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:23,082 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@26abb146 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@72c8e7b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:23,117 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
15:15:23,125 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 195 ms
15:15:23,125 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:15:23,126 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@1ec9bd38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@452e19ca, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:15:23,133 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@a1f72f5: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@452e19ca"
15:15:23,134 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'f458fc69-2b55-41c8-82e9-cc067f1356da'>
15:15:23,135 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:15:23,137 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 12 ms
15:15:23,137 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@1ec9bd38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@452e19ca, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:23,138 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@1ec9bd38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@452e19ca, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:23,171 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-122195305-1, enlisted resources=[]]
15:15:23,171 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
15:15:23,171 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a"
15:15:23,180 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
15:15:23,180 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:15:23,180 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
15:15:23,181 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2474f125 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7357a011, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:15:23,181 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned no table
15:15:23,181 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of catalog=droit_onlinestore schema=null returned false
15:15:23,182 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE DATABASE IF NOT EXISTS droit_onlinestore
15:15:23,182 (main) DEBUG [DataNucleus.Datastore.Schema] - createDatabase returned false
15:15:23,182 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE droit_onlinestore.`SEQUENCE_TABLE`
(
    `SEQUENCE_NAME` VARCHAR(255) BINARY NOT NULL,
    `NEXT_VAL` BIGINT NOT NULL,
    CONSTRAINT `SEQUENCE_TABLE_PK` PRIMARY KEY (`SEQUENCE_NAME`)
) ENGINE=INNODB
15:15:23,198 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 15 ms
15:15:23,199 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@45d2ade3: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7357a011"
15:15:23,199 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
15:15:23,199 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:15:23,200 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@727eb8cb: SELECT MAX(`GLOBALINDEX`) FROM `DOMAIN_EVENT`" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7357a011"
15:15:23,200 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT MAX(`GLOBALINDEX`) FROM `DOMAIN_EVENT`
15:15:23,200 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:15:23,200 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@39d9314d" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7357a011"
15:15:23,200 (main) DEBUG [DataNucleus.Datastore.Native] - INSERT INTO droit_onlinestore.`SEQUENCE_TABLE` (`SEQUENCE_NAME`,`NEXT_VAL`) VALUES (<'com.metamagic.droit.eventsourcing.model.DomainEvent'>,<11>)
15:15:23,201 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 1 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@39d9314d"
15:15:23,201 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@39d9314d"
15:15:23,201 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5c45d770"
15:15:23,201 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@1bae316d"
15:15:23,202 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
15:15:23,202 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2474f125 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7357a011, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:23,205 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2474f125 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7357a011, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:15:23,207 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=1
15:15:23,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:15:23,215 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="1") enlisted in transactional cache
15:15:23,236 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" being inserted into table "`DOMAIN_EVENT`"
15:15:23,243 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@176b75f7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5965be2d, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:15:23,245 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@71e693fa, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-122195305-1, enlisted resources=[]]
15:15:23,246 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7aaca91a" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5965be2d"
15:15:23,246 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:15:23,252 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") is having the value in field "timeStamp" replaced by a SCO wrapper
15:15:23,252 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:15:23,253 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'f458fc69-2b55-41c8-82e9-cc067f1356da'>,<'c01b2b98-3e46-4e0e-aeff-6481aa144b64'>,<'{"cartId":"f458fc69-2b55-41c8-82e9-cc067f1356da","custId":"9ab70e03-68d1-4a77-b17c-9a6bc4b6585d"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 15:15:23.17>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<1>)]
15:15:23,254 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7aaca91a"
15:15:23,254 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
15:15:23,256 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:15:23,256 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:15:23,256 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:15:23,256 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "1"
15:15:23,256 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:15:23,256 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="1") lifecycle state "P_NEW" added to the list of reachables on commit.
15:15:23,257 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:15:23,257 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:15:23,257 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:15:23,258 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="1") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:15:23,259 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-122195305-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@71e693fa]]
15:15:23,259 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@176b75f7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5965be2d, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:15:23,262 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@176b75f7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5965be2d, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:15:23,263 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") has a lifecycle change : "P_NEW"->"HOLLOW"
15:15:23,263 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@67b9b51a" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") was evicted from transactional cache
15:15:23,263 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 10 ms
15:20:45,815 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
15:20:45,838 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
15:20:45,850 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:20:45,856 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:20:45,857 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
15:20:45,866 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:20:45,869 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:20:45,878 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
15:20:45,884 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:20:45,890 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:20:45,909 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:20:45,913 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:20:45,929 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
15:20:45,968 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
15:20:45,969 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
15:20:45,992 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
15:20:45,992 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
15:20:45,992 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
15:20:45,992 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
15:20:45,993 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
15:20:45,994 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
15:20:45,995 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
15:20:45,995 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
15:20:45,995 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
15:20:45,995 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
15:20:45,995 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
15:20:45,995 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
15:20:45,995 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
15:20:45,995 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
15:20:46,028 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
15:20:46,046 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
15:20:46,047 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
15:20:46,047 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
15:20:46,047 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
15:20:46,047 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
15:20:46,048 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,049 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:20:46,050 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
15:20:46,051 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
15:20:46,052 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
15:20:46,053 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
15:20:46,131 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
15:20:46,131 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
15:20:46,131 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
15:20:46,139 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
15:20:46,313 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
15:20:46,338 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
15:20:46,338 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
15:20:46,338 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
15:20:46,338 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:20:46,339 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:20:46,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507197046346`.`UNUSED`" added to internal representation of table.
15:20:46,356 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507197046346`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
15:20:46,384 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 27 ms
15:20:46,417 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
15:20:46,417 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507197046346` CASCADE
15:20:46,436 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 19 ms
15:20:46,440 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
15:20:46,443 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
15:20:46,443 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:20:46,444 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
15:20:46,445 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:20:46,446 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,447 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
15:20:46,450 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
15:20:46,457 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
15:20:46,458 (main) DEBUG [DataNucleus.Persistence] - ================================================
15:20:46,480 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
15:20:46,724 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:20:46,738 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 14 ms
15:20:46,738 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
15:20:46,739 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:20:46,751 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
15:20:46,752 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
15:20:46,752 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:20:46,754 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
15:20:46,754 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
15:20:46,755 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,755 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:20:46,755 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
15:20:46,755 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:20:46,756 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
15:20:46,757 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
15:20:46,757 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
15:20:46,757 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,757 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:20:46,757 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
15:20:46,759 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@d554c5f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2dfaea86, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
15:20:46,759 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2dfaea86" with isolation "serializable"
15:20:46,760 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
15:20:46,760 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
15:20:46,769 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 9 ms
15:20:46,769 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
15:20:46,773 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
15:20:46,775 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
15:20:46,777 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
15:20:46,777 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2dfaea86"
15:20:46,778 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2dfaea86"
15:20:46,778 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@d554c5f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2dfaea86, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,778 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@d554c5f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2dfaea86, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,801 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
15:20:46,811 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 71 ms
15:20:46,811 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:20:46,812 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@102cec62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@74f6c5d8, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:20:46,820 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@24c22fe: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@74f6c5d8"
15:20:46,823 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'27efeb93-4773-4ff9-8716-5387dcf21644'>
15:20:46,824 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:20:46,826 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 15 ms
15:20:46,826 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@102cec62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@74f6c5d8, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,827 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@102cec62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@74f6c5d8, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,864 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1963864405-1, enlisted resources=[]]
15:20:46,864 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
15:20:46,864 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b"
15:20:46,872 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
15:20:46,872 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:20:46,872 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
15:20:46,873 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@11f0a5a1 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@10f7f7de, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:20:46,873 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
15:20:46,874 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@50dfbc58: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@10f7f7de"
15:20:46,874 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
15:20:46,874 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:20:46,874 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@4416d64f" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@10f7f7de"
15:20:46,874 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
15:20:46,875 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 1 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@4416d64f"
15:20:46,875 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@4416d64f"
15:20:46,875 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@732d0d24"
15:20:46,875 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
15:20:46,875 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@11f0a5a1 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@10f7f7de, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,878 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@11f0a5a1 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@10f7f7de, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:20:46,879 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=11
15:20:46,880 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:20:46,880 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="11") enlisted in transactional cache
15:20:46,884 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" being inserted into table "`DOMAIN_EVENT`"
15:20:46,887 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@60b4beb4 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7fcf2fc1, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:20:46,888 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@20435c40, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1963864405-1, enlisted resources=[]]
15:20:46,888 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@571c5681" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7fcf2fc1"
15:20:46,888 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:20:46,891 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") is having the value in field "timeStamp" replaced by a SCO wrapper
15:20:46,892 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:20:46,893 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'27efeb93-4773-4ff9-8716-5387dcf21644'>,<'1ef41f9d-f6d0-4429-9b45-ff9dda39e762'>,<'{"cartId":"27efeb93-4773-4ff9-8716-5387dcf21644","custId":"f71a0fd5-1185-44ae-b7a4-ede0bea60cf9"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 15:20:46.863>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<11>)]
15:20:46,893 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@571c5681"
15:20:46,893 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
15:20:46,894 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:20:46,895 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:20:46,895 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:20:46,895 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "11"
15:20:46,895 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:20:46,895 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="11") lifecycle state "P_NEW" added to the list of reachables on commit.
15:20:46,896 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:20:46,896 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:20:46,896 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:20:46,897 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="11") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:20:46,898 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1963864405-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@20435c40]]
15:20:46,898 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@60b4beb4 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7fcf2fc1, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:20:46,899 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@60b4beb4 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7fcf2fc1, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:20:46,900 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") has a lifecycle change : "P_NEW"->"HOLLOW"
15:20:46,900 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7d3d101b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") was evicted from transactional cache
15:20:46,900 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 7 ms
15:22:54,062 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
15:22:54,076 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
15:22:54,084 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:22:54,089 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:22:54,090 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
15:22:54,098 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:22:54,100 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:22:54,103 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
15:22:54,107 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:22:54,109 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:22:54,127 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:22:54,131 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:22:54,144 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
15:22:54,181 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
15:22:54,181 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
15:22:54,204 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
15:22:54,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
15:22:54,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
15:22:54,207 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
15:22:54,207 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
15:22:54,240 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
15:22:54,255 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
15:22:54,255 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
15:22:54,256 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
15:22:54,256 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
15:22:54,256 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
15:22:54,257 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
15:22:54,257 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
15:22:54,257 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
15:22:54,257 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
15:22:54,257 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
15:22:54,258 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,259 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:22:54,260 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
15:22:54,260 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
15:22:54,261 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
15:22:54,262 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
15:22:54,330 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
15:22:54,330 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
15:22:54,330 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
15:22:54,336 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
15:22:54,512 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
15:22:54,537 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
15:22:54,537 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
15:22:54,537 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
15:22:54,537 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:22:54,538 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:22:54,559 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507197174549`.`UNUSED`" added to internal representation of table.
15:22:54,562 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507197174549`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
15:22:54,586 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 24 ms
15:22:54,597 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
15:22:54,597 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507197174549` CASCADE
15:22:54,607 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 10 ms
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
15:22:54,608 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15:22:54,609 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
15:22:54,609 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
15:22:54,609 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
15:22:54,609 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
15:22:54,609 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:22:54,609 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:54,610 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
15:22:54,611 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
15:22:54,615 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
15:22:54,616 (main) DEBUG [DataNucleus.Persistence] - ================================================
15:22:54,633 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
15:22:54,866 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:22:54,879 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 12 ms
15:22:54,879 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
15:22:54,880 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:22:54,890 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
15:22:54,891 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
15:22:54,891 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:22:54,893 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
15:22:54,893 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
15:22:54,894 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:54,895 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:22:54,895 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:22:54,896 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
15:22:54,897 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:54,897 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:22:54,897 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
15:22:54,897 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:22:54,898 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
15:22:54,898 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
15:22:54,898 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
15:22:54,899 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:54,899 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:22:54,900 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
15:22:54,901 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
15:22:54,901 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179" with isolation "serializable"
15:22:54,902 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
15:22:54,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
15:22:54,913 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 10 ms
15:22:54,914 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
15:22:54,919 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
15:22:54,921 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
15:22:54,923 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
15:22:54,924 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
15:22:54,924 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
15:22:54,924 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:54,924 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:54,948 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
15:22:54,959 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 78 ms
15:22:54,959 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:22:54,960 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:22:54,969 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@14f232c4: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551"
15:22:54,971 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c6c8103a-a6ee-4211-9bcf-f099758724c6'>
15:22:54,972 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:22:54,974 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 15 ms
15:22:54,974 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:54,974 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:55,011 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-324084084-1, enlisted resources=[]]
15:22:55,011 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
15:22:55,011 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc"
15:22:55,020 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
15:22:55,020 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:22:55,020 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
15:22:55,021 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:22:55,021 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
15:22:55,022 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@10f7f7de: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
15:22:55,022 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
15:22:55,022 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:22:55,022 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
15:22:55,022 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
15:22:55,023 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 1 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
15:22:55,023 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
15:22:55,023 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6bf08014"
15:22:55,023 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
15:22:55,023 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:55,026 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:22:55,027 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=21
15:22:55,029 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:22:55,029 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="21") enlisted in transactional cache
15:22:55,033 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" being inserted into table "`DOMAIN_EVENT`"
15:22:55,037 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:22:55,038 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-324084084-1, enlisted resources=[]]
15:22:55,038 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828"
15:22:55,038 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:22:55,041 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") is having the value in field "timeStamp" replaced by a SCO wrapper
15:22:55,041 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:22:55,042 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c6c8103a-a6ee-4211-9bcf-f099758724c6'>,<'6fd0344a-1831-47d9-933c-0a231b962f43'>,<'{"cartId":"c6c8103a-a6ee-4211-9bcf-f099758724c6","custId":"8d49de49-812b-48ee-846d-c65271d76b0c"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 15:22:55.01>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<21>)]
15:22:55,043 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0"
15:22:55,043 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
15:22:55,044 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:22:55,044 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:22:55,044 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:22:55,044 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "21"
15:22:55,044 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:22:55,044 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="21") lifecycle state "P_NEW" added to the list of reachables on commit.
15:22:55,045 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:22:55,045 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:22:55,045 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:22:55,046 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="21") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:22:55,047 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-324084084-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8]]
15:22:55,047 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:22:55,049 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:22:55,050 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") has a lifecycle change : "P_NEW"->"HOLLOW"
15:22:55,050 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") was evicted from transactional cache
15:22:55,051 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 9 ms
15:24:51,432 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
15:24:51,448 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
15:24:51,458 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:24:51,463 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:24:51,465 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
15:24:51,473 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:24:51,475 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:24:51,478 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
15:24:51,482 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:24:51,484 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:24:51,501 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:24:51,506 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:24:51,517 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
15:24:51,554 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
15:24:51,554 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
15:24:51,577 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
15:24:51,577 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
15:24:51,578 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
15:24:51,579 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
15:24:51,580 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
15:24:51,581 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
15:24:51,613 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
15:24:51,627 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
15:24:51,627 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
15:24:51,628 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
15:24:51,628 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
15:24:51,628 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
15:24:51,629 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,630 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,631 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,631 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:24:51,632 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
15:24:51,632 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
15:24:51,633 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
15:24:51,634 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
15:24:51,704 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
15:24:51,704 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
15:24:51,704 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
15:24:51,710 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
15:24:51,890 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
15:24:51,917 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
15:24:51,917 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
15:24:51,917 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
15:24:51,917 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:24:51,918 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:24:51,938 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507197291927`.`UNUSED`" added to internal representation of table.
15:24:51,942 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507197291927`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
15:24:51,967 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 24 ms
15:24:51,975 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
15:24:51,975 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507197291927` CASCADE
15:24:51,987 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 12 ms
15:24:51,988 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
15:24:51,988 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
15:24:51,988 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
15:24:51,988 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
15:24:51,988 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
15:24:51,989 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:24:51,990 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:51,990 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
15:24:51,992 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
15:24:51,998 (main) DEBUG [DataNucleus.Persistence] - ================================================
15:24:52,010 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
15:24:52,238 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:24:52,248 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 10 ms
15:24:52,248 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
15:24:52,249 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:24:52,260 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
15:24:52,260 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
15:24:52,260 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:24:52,262 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
15:24:52,262 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,264 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
15:24:52,265 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
15:24:52,266 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,266 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:24:52,266 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
15:24:52,267 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
15:24:52,267 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179" with isolation "serializable"
15:24:52,268 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
15:24:52,269 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
15:24:52,278 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 9 ms
15:24:52,278 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
15:24:52,282 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
15:24:52,286 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
15:24:52,288 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
15:24:52,289 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
15:24:52,289 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
15:24:52,289 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:52,289 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:52,313 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
15:24:52,324 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 75 ms
15:24:52,325 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:24:52,326 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:24:52,334 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@14f232c4: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551"
15:24:52,336 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d2024957-a1a6-48b0-a2e0-79fa0e2805e0'>
15:24:52,337 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:24:52,339 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 14 ms
15:24:52,339 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:52,340 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:52,375 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=860029527-1, enlisted resources=[]]
15:24:52,375 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
15:24:52,375 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc"
15:24:52,383 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
15:24:52,383 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:24:52,383 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
15:24:52,384 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:24:52,385 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
15:24:52,385 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@10f7f7de: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
15:24:52,385 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
15:24:52,385 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:24:52,385 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@73a8da0f: SELECT MAX(`GLOBALINDEX`) FROM `DOMAIN_EVENT`" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
15:24:52,385 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT MAX(`GLOBALINDEX`) FROM `DOMAIN_EVENT`
15:24:52,386 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:24:52,386 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
15:24:52,386 (main) DEBUG [DataNucleus.Datastore.Native] - INSERT INTO droit_onlinestore.`SEQUENCE_TABLE` (`SEQUENCE_NAME`,`NEXT_VAL`) VALUES (<'com.metamagic.droit.eventsourcing.model.DomainEvent'>,<11>)
15:24:52,386 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
15:24:52,386 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
15:24:52,386 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5e3d57c7"
15:24:52,387 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@1fb19a0"
15:24:52,387 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
15:24:52,387 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:52,389 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:24:52,390 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=1
15:24:52,391 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:24:52,391 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="1") enlisted in transactional cache
15:24:52,396 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" being inserted into table "`DOMAIN_EVENT`"
15:24:52,399 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7fcf2fc1 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2141a12, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:24:52,400 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@573906eb, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=860029527-1, enlisted resources=[]]
15:24:52,401 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68dc098b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2141a12"
15:24:52,401 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:24:52,404 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") is having the value in field "timeStamp" replaced by a SCO wrapper
15:24:52,404 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:24:52,405 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d2024957-a1a6-48b0-a2e0-79fa0e2805e0'>,<'5846463e-574c-46e7-aed4-1cf1950202f8'>,<'{"cartId":"d2024957-a1a6-48b0-a2e0-79fa0e2805e0","custId":"9de45f43-a24e-4c44-894e-acceeafbf08d"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 15:24:52.374>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<1>)]
15:24:52,405 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68dc098b"
15:24:52,405 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
15:24:52,406 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:24:52,406 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:24:52,406 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:24:52,406 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "1"
15:24:52,406 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:24:52,407 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="1") lifecycle state "P_NEW" added to the list of reachables on commit.
15:24:52,407 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:24:52,407 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:24:52,407 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:24:52,408 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="1") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:24:52,409 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=860029527-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@573906eb]]
15:24:52,409 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7fcf2fc1 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2141a12, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:24:52,411 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7fcf2fc1 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@2141a12, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:24:52,412 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") has a lifecycle change : "P_NEW"->"HOLLOW"
15:24:52,412 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:1") was evicted from transactional cache
15:24:52,412 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 8 ms
15:53:58,872 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
15:53:58,886 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
15:53:58,896 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:53:58,901 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
15:53:58,903 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
15:53:58,911 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:53:58,914 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
15:53:58,916 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
15:53:58,921 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:53:58,926 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
15:53:58,950 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
15:53:58,967 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
15:53:59,005 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
15:53:59,006 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
15:53:59,026 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : int[],java.lang.String
15:53:59,027 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,byte[],java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.Long,java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.lang.Long,java.util.Date,java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.lang.Long,java.util.Date,java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.lang.Long,java.util.Date,java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Long,java.lang.Double,java.lang.String
15:53:59,028 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.lang.Long,java.util.Date,java.sql.Timestamp,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.sql.Date,java.util.Date,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.lang.Long,java.util.Date,java.lang.String,java.sql.Time
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.sql.Date,int[],java.util.Date,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.Long,java.lang.String,java.sql.Time
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : int[],java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.String,java.lang.Integer
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.sql.Date,int[],java.util.Date,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : [Ljava.lang.Object;,java.util.Date,java.sql.Timestamp,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.Long,java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
15:53:59,029 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
15:53:59,030 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
15:53:59,030 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
15:53:59,030 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
15:53:59,059 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
15:53:59,072 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
15:53:59,072 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
15:53:59,072 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
15:53:59,072 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
15:53:59,072 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
15:53:59,073 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
15:53:59,073 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
15:53:59,073 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
15:53:59,073 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
15:53:59,074 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,075 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
15:53:59,076 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
15:53:59,077 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
15:53:59,078 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
15:53:59,079 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
15:53:59,149 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
15:53:59,149 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
15:53:59,149 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
15:53:59,157 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
15:53:59,399 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
15:53:59,434 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
15:53:59,434 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
15:53:59,435 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
15:53:59,436 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
15:53:59,466 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507199039447`.`UNUSED`" added to internal representation of table.
15:53:59,470 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507199039447`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
15:53:59,500 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 29 ms
15:53:59,510 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
15:53:59,510 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507199039447` CASCADE
15:53:59,519 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 9 ms
15:53:59,520 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
15:53:59,520 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
15:53:59,520 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
15:53:59,520 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
15:53:59,520 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
15:53:59,520 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
15:53:59,521 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
15:53:59,521 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5c909414, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:53:59,522 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
15:53:59,524 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
15:53:59,530 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
15:53:59,530 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
15:53:59,530 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
15:53:59,530 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
15:53:59,530 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
15:53:59,530 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
15:53:59,531 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
15:53:59,531 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
15:53:59,531 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
15:53:59,531 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
15:53:59,531 (main) DEBUG [DataNucleus.Persistence] - ================================================
15:53:59,547 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@1139b2f3" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@79ad8b2f" with txn="org.datanucleus.TransactionImpl@7a69b07"
15:53:59,869 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:53:59,884 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 15 ms
15:53:59,885 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
15:53:59,886 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
15:53:59,901 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
15:53:59,902 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
15:53:59,902 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:53:59,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
15:53:59,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
15:53:59,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
15:53:59,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
15:53:59,908 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
15:53:59,908 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
15:53:59,908 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:53:59,908 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
15:53:59,908 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
15:53:59,910 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
15:53:59,910 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b" with isolation "serializable"
15:53:59,912 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
15:53:59,913 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
15:53:59,927 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 14 ms
15:53:59,927 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
15:53:59,933 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
15:53:59,936 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
15:53:59,938 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
15:53:59,939 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
15:53:59,939 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
15:53:59,940 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:53:59,940 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:53:59,967 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
15:53:59,975 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 89 ms
15:53:59,976 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:53:59,976 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:53:59,985 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@791d1f8b: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a"
15:53:59,988 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:53:59,988 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:53:59,991 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 15 ms
15:53:59,991 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:53:59,991 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,045 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-1, enlisted resources=[]]
15:54:00,045 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,046 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00"
15:54:00,058 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
15:54:00,058 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
15:54:00,058 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
15:54:00,059 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,060 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
15:54:00,060 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1b45c0e: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
15:54:00,060 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
15:54:00,061 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:54:00,061 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
15:54:00,061 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
15:54:00,062 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 1 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
15:54:00,062 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
15:54:00,062 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
15:54:00,062 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
15:54:00,063 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,065 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,066 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=11
15:54:00,070 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,070 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="11") enlisted in transactional cache
15:54:00,076 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" being inserted into table "`DOMAIN_EVENT`"
15:54:00,081 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,082 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-1, enlisted resources=[]]
15:54:00,083 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a"
15:54:00,083 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,089 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,090 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,091 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'e80f9866-f146-4dcb-b10a-dbad34342d0d'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","custId":"9de329cd-b87a-4c4f-bf1a-d8ce9174ab13"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 15:54:00.042>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<11>)]
15:54:00,092 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40"
15:54:00,092 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,093 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,094 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,094 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,094 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "11"
15:54:00,094 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,094 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="11") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,095 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,095 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,095 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,097 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="11") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,098 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12]]
15:54:00,098 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,101 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,103 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,103 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") was evicted from transactional cache
15:54:00,103 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 12 ms
15:54:00,105 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
15:54:00,105 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
15:54:00,105 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:54:00,106 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,107 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@37e4d7bb: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318"
15:54:00,107 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:54:00,108 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:54:00,108 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 3 ms
15:54:00,108 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,108 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
15:54:00,109 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
15:54:00,111 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,111 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
15:54:00,137 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-2, enlisted resources=[]]
15:54:00,137 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,137 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82"
15:54:00,137 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=12
15:54:00,137 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,137 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="12") enlisted in transactional cache
15:54:00,137 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" being inserted into table "`DOMAIN_EVENT`"
15:54:00,138 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,138 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-2, enlisted resources=[]]
15:54:00,138 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68"
15:54:00,138 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,139 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,139 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,139 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'201ff795-0be3-41b9-ad30-5792c8f3791b'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-05 15:54:00.136>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<12>)]
15:54:00,140 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03"
15:54:00,140 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,140 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "12"
15:54:00,141 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="12") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,141 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,141 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="12") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,141 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d]]
15:54:00,142 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,144 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,144 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,144 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") was evicted from transactional cache
15:54:00,144 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
15:54:00,145 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
15:54:00,145 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
15:54:00,145 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:54:00,145 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,146 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@58ce9668: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741"
15:54:00,146 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:54:00,146 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:54:00,146 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
15:54:00,146 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,147 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
15:54:00,147 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,147 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
15:54:00,148 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,148 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
15:54:00,154 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-3, enlisted resources=[]]
15:54:00,154 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,154 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f"
15:54:00,154 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=13
15:54:00,155 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,155 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="13") enlisted in transactional cache
15:54:00,155 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" being inserted into table "`DOMAIN_EVENT`"
15:54:00,155 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,155 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-3, enlisted resources=[]]
15:54:00,156 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385"
15:54:00,156 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,156 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,157 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,157 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'093436f4-a927-4e55-8986-111d39c16109'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-05 15:54:00.154>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<13>)]
15:54:00,158 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23"
15:54:00,158 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,158 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,158 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,158 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,158 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "13"
15:54:00,158 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,158 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="13") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,159 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,159 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,159 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,159 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="13") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,159 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf]]
15:54:00,159 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,161 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,161 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,162 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") was evicted from transactional cache
15:54:00,162 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
15:54:00,162 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
15:54:00,162 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
15:54:00,162 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:54:00,162 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,163 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@6af9fcb2: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2"
15:54:00,163 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:54:00,163 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:54:00,163 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
15:54:00,163 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,163 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
15:54:00,163 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,164 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,164 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
15:54:00,164 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,165 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
15:54:00,165 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-4, enlisted resources=[]]
15:54:00,165 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,165 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c"
15:54:00,166 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=14
15:54:00,166 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,166 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="14") enlisted in transactional cache
15:54:00,166 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" being inserted into table "`DOMAIN_EVENT`"
15:54:00,167 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,167 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-4, enlisted resources=[]]
15:54:00,167 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5"
15:54:00,167 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,167 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,168 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,168 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'30947b99-374b-4ef7-af99-5e7ce6d2681d'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-05 15:54:00.165>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<14>)]
15:54:00,168 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b"
15:54:00,168 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "14"
15:54:00,169 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="14") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,169 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,169 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="14") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,169 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a]]
15:54:00,169 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,172 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,172 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,172 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") was evicted from transactional cache
15:54:00,172 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
15:54:00,173 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
15:54:00,173 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
15:54:00,173 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:54:00,173 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,176 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@512baff6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1"
15:54:00,176 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:54:00,177 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:54:00,177 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 4 ms
15:54:00,177 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,177 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
15:54:00,178 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,178 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,178 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,178 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
15:54:00,178 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,178 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
15:54:00,179 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-5, enlisted resources=[]]
15:54:00,179 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,179 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575"
15:54:00,179 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=15
15:54:00,179 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,179 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="15") enlisted in transactional cache
15:54:00,180 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" being inserted into table "`DOMAIN_EVENT`"
15:54:00,181 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,181 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-5, enlisted resources=[]]
15:54:00,181 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572"
15:54:00,181 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,182 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,182 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,182 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'861d2b96-e824-43d2-8ffa-fff33570e7af'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-05 15:54:00.179>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<15>)]
15:54:00,182 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961"
15:54:00,182 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,182 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,182 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,182 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,182 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "15"
15:54:00,183 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,183 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="15") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,183 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,183 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,183 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,183 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="15") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,183 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24]]
15:54:00,183 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,185 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,185 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,185 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") was evicted from transactional cache
15:54:00,185 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
15:54:00,186 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
15:54:00,186 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
15:54:00,187 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:54:00,187 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,187 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@c9d0d6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30"
15:54:00,187 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:54:00,188 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
15:54:00,188 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
15:54:00,188 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,188 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
15:54:00,188 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,188 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,188 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,189 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,189 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
15:54:00,189 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,190 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
15:54:00,191 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-6, enlisted resources=[]]
15:54:00,191 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,191 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819"
15:54:00,191 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=16
15:54:00,191 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,191 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="16") enlisted in transactional cache
15:54:00,192 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" being inserted into table "`DOMAIN_EVENT`"
15:54:00,192 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,193 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-6, enlisted resources=[]]
15:54:00,195 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6"
15:54:00,195 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,195 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,197 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,197 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'caeca83a-2cbc-42f3-8b76-b71466309cfb'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-05 15:54:00.191>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<16>)]
15:54:00,197 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d"
15:54:00,198 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "16"
15:54:00,198 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="16") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,198 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,198 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="16") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,198 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c]]
15:54:00,198 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,200 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,200 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,201 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") was evicted from transactional cache
15:54:00,201 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
15:54:00,201 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
15:54:00,201 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
15:54:00,201 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
15:54:00,202 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
15:54:00,202 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@38089a5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a"
15:54:00,202 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'5394555c-98a2-4cf4-a9fd-c9d80a465883'>
15:54:00,202 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
15:54:00,203 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
15:54:00,203 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,203 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
15:54:00,203 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,204 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,204 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,204 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,204 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,204 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
15:54:00,204 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
15:54:00,205 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
15:54:00,206 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1813271629-7, enlisted resources=[]]
15:54:00,206 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
15:54:00,206 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61"
15:54:00,207 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=17
15:54:00,207 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,207 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="17") enlisted in transactional cache
15:54:00,207 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" being inserted into table "`DOMAIN_EVENT`"
15:54:00,207 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
15:54:00,207 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1813271629-7, enlisted resources=[]]
15:54:00,209 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59"
15:54:00,209 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
15:54:00,210 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") is having the value in field "timeStamp" replaced by a SCO wrapper
15:54:00,210 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
15:54:00,210 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'5394555c-98a2-4cf4-a9fd-c9d80a465883'>,<'7f37b56e-c947-4a0b-8144-3978d7c78566'>,<'{"cartId":"5394555c-98a2-4cf4-a9fd-c9d80a465883","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-05 15:54:00.206>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<17>)]
15:54:00,211 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1"
15:54:00,211 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "17"
15:54:00,211 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="17") lifecycle state "P_NEW" added to the list of reachables on commit.
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
15:54:00,211 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
15:54:00,211 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="17") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
15:54:00,211 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1813271629-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f]]
15:54:00,211 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,214 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
15:54:00,214 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") has a lifecycle change : "P_NEW"->"HOLLOW"
15:54:00,215 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") was evicted from transactional cache
15:54:00,215 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
16:05:11,761 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
16:05:11,776 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
16:05:11,784 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
16:05:11,789 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
16:05:11,791 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
16:05:11,799 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
16:05:11,801 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
16:05:11,803 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
16:05:11,808 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
16:05:11,810 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
16:05:11,828 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
16:05:11,844 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
16:05:11,880 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
16:05:11,880 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
16:05:11,924 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
16:05:11,924 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
16:05:11,926 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
16:05:11,926 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
16:05:11,926 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
16:05:11,926 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
16:05:11,926 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : int[],java.lang.String
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,byte[],java.lang.String
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
16:05:11,927 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
16:05:11,928 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
16:05:11,928 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
16:05:11,928 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
16:05:11,928 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
16:05:11,928 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.Long,java.lang.String
16:05:11,928 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
16:05:11,929 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
16:05:11,929 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.lang.Long,java.util.Date,java.lang.String
16:05:11,929 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.lang.Long,java.util.Date,java.lang.String
16:05:11,929 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.lang.Long,java.util.Date,java.lang.String
16:05:11,929 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Long,java.lang.Double,java.lang.String
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.lang.Long,java.util.Date,java.sql.Timestamp,java.lang.String
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.sql.Date,java.util.Date,java.lang.String
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.lang.Long,java.util.Date,java.lang.String,java.sql.Time
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.sql.Date,int[],java.util.Date,java.lang.String
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.Long,java.lang.String,java.sql.Time
16:05:11,930 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : int[],java.lang.String
16:05:11,931 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.String,java.lang.Integer
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.sql.Date,int[],java.util.Date,java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : [Ljava.lang.Object;,java.util.Date,java.sql.Timestamp,java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.Long,java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
16:05:11,932 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
16:05:11,933 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
16:05:11,933 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
16:05:11,935 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
16:05:11,974 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
16:05:11,989 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
16:05:11,990 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
16:05:11,990 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
16:05:11,990 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
16:05:11,990 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
16:05:11,991 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
16:05:11,991 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
16:05:11,991 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
16:05:11,992 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
16:05:11,992 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
16:05:11,992 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
16:05:11,993 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
16:05:11,993 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
16:05:11,993 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
16:05:11,993 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
16:05:11,993 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
16:05:11,993 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,994 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:05:11,995 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
16:05:11,996 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
16:05:11,997 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
16:05:11,999 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
16:05:12,099 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
16:05:12,099 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
16:05:12,099 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
16:05:12,108 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
16:05:12,336 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
16:05:12,374 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
16:05:12,375 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
16:05:12,405 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507199712389`.`UNUSED`" added to internal representation of table.
16:05:12,409 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507199712389`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
16:05:12,434 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 25 ms
16:05:12,445 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
16:05:12,445 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507199712389` CASCADE
16:05:12,452 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 7 ms
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
16:05:12,453 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
16:05:12,454 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
16:05:12,454 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5c909414, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:12,455 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
16:05:12,457 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
16:05:12,461 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
16:05:12,461 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
16:05:12,461 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
16:05:12,461 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
16:05:12,462 (main) DEBUG [DataNucleus.Persistence] - ================================================
16:05:12,481 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@1139b2f3" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@79ad8b2f" with txn="org.datanucleus.TransactionImpl@7a69b07"
16:05:12,813 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
16:05:12,835 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 22 ms
16:05:12,835 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
16:05:12,837 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
16:05:12,853 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
16:05:12,853 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
16:05:12,854 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
16:05:12,856 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
16:05:12,857 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
16:05:12,858 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,859 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:05:12,859 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
16:05:12,859 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,859 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:05:12,859 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
16:05:12,859 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
16:05:12,860 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
16:05:12,861 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
16:05:12,861 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
16:05:12,862 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,862 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:05:12,862 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
16:05:12,865 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
16:05:12,865 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b" with isolation "serializable"
16:05:12,866 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
16:05:12,867 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
16:05:12,879 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 12 ms
16:05:12,879 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
16:05:12,886 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
16:05:12,889 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
16:05:12,891 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
16:05:12,892 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
16:05:12,893 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
16:05:12,893 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:12,893 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:12,920 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
16:05:12,929 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 92 ms
16:05:12,930 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:12,930 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:12,940 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@791d1f8b: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a"
16:05:12,942 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:12,943 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:05:12,946 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 17 ms
16:05:12,946 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:12,947 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:12,989 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-1, enlisted resources=[]]
16:05:12,989 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:12,989 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00"
16:05:12,998 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
16:05:12,998 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:05:12,998 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
16:05:12,999 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:12,999 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
16:05:12,999 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1b45c0e: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
16:05:12,999 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
16:05:13,000 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:05:13,000 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
16:05:13,000 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
16:05:13,000 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
16:05:13,000 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
16:05:13,000 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
16:05:13,001 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
16:05:13,001 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,003 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,004 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=21
16:05:13,005 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,005 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="21") enlisted in transactional cache
16:05:13,010 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" being inserted into table "`DOMAIN_EVENT`"
16:05:13,013 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,014 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-1, enlisted resources=[]]
16:05:13,014 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a"
16:05:13,014 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,017 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,017 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,018 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'09a46ad7-77f8-42db-bf17-3e51855f0628'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","custId":"47c94033-9f29-4804-9869-dbe6c242c272"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 16:05:12.988>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<21>)]
16:05:13,019 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40"
16:05:13,019 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,019 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,020 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,020 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,020 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "21"
16:05:13,020 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,020 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="21") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,020 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,021 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,021 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,021 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="21") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,022 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12]]
16:05:13,022 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,024 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,025 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,025 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") was evicted from transactional cache
16:05:13,025 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 7 ms
16:05:13,026 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,026 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,026 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,027 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,027 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@37e4d7bb: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318"
16:05:13,027 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,028 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:05:13,028 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
16:05:13,028 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,028 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,029 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,030 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,031 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:05:13,048 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-2, enlisted resources=[]]
16:05:13,048 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:13,048 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82"
16:05:13,048 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=22
16:05:13,048 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,048 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="22") enlisted in transactional cache
16:05:13,049 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" being inserted into table "`DOMAIN_EVENT`"
16:05:13,049 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,049 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-2, enlisted resources=[]]
16:05:13,049 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68"
16:05:13,049 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,049 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,050 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,050 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'0a240b37-1b3d-4dca-b8ec-e8eee8593e9c'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-05 16:05:13.048>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<22>)]
16:05:13,050 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03"
16:05:13,050 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,050 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,050 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,050 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,050 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "22"
16:05:13,050 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,051 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="22") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,051 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,051 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,051 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,051 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="22") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,051 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d]]
16:05:13,051 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,053 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,053 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,053 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") was evicted from transactional cache
16:05:13,053 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:05:13,053 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,053 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,053 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,054 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,054 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@58ce9668: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741"
16:05:13,054 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,054 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:05:13,054 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:05:13,054 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,055 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,055 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,055 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,055 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,056 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:05:13,060 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-3, enlisted resources=[]]
16:05:13,060 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:13,060 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f"
16:05:13,060 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=23
16:05:13,060 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,061 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="23") enlisted in transactional cache
16:05:13,061 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" being inserted into table "`DOMAIN_EVENT`"
16:05:13,061 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,061 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-3, enlisted resources=[]]
16:05:13,061 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385"
16:05:13,061 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,061 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,062 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,062 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'3b67afb2-6204-4894-9f42-e1a4be93d610'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-05 16:05:13.06>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<23>)]
16:05:13,062 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23"
16:05:13,063 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "23"
16:05:13,063 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="23") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,063 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,063 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="23") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,063 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf]]
16:05:13,063 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,066 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,067 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,067 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") was evicted from transactional cache
16:05:13,067 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
16:05:13,067 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,067 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,067 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,068 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,069 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@6af9fcb2: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2"
16:05:13,069 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,069 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:05:13,069 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
16:05:13,069 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,069 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,070 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,070 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,070 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,071 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,071 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:05:13,072 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-4, enlisted resources=[]]
16:05:13,072 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:13,072 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c"
16:05:13,072 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=24
16:05:13,072 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,072 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="24") enlisted in transactional cache
16:05:13,072 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" being inserted into table "`DOMAIN_EVENT`"
16:05:13,073 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,073 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-4, enlisted resources=[]]
16:05:13,073 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5"
16:05:13,073 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,074 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,074 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,074 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'051e2e87-17a3-4236-a6d1-f84057e2f126'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-05 16:05:13.072>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<24>)]
16:05:13,074 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b"
16:05:13,074 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "24"
16:05:13,075 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="24") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,075 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,075 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="24") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,075 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a]]
16:05:13,075 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,082 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,083 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,083 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") was evicted from transactional cache
16:05:13,083 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 9 ms
16:05:13,083 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,083 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,083 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,084 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,084 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@512baff6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1"
16:05:13,084 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,084 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:05:13,084 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:05:13,085 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,085 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,085 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,086 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,086 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,086 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,086 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,087 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:05:13,088 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-5, enlisted resources=[]]
16:05:13,088 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:13,088 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575"
16:05:13,088 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=25
16:05:13,088 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,088 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="25") enlisted in transactional cache
16:05:13,088 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" being inserted into table "`DOMAIN_EVENT`"
16:05:13,089 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,089 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-5, enlisted resources=[]]
16:05:13,089 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572"
16:05:13,089 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,090 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,090 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,090 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'f0be7b63-dc72-4c9e-8180-6d9abd2c9897'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-05 16:05:13.088>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<25>)]
16:05:13,091 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961"
16:05:13,091 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "25"
16:05:13,091 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="25") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,091 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,091 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="25") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,091 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24]]
16:05:13,091 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,094 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,094 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,094 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") was evicted from transactional cache
16:05:13,094 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:05:13,095 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,095 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,095 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,097 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,097 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@c9d0d6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30"
16:05:13,097 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,098 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:05:13,098 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 3 ms
16:05:13,098 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,098 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,098 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,098 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,098 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,098 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,099 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,099 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,099 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:05:13,100 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-6, enlisted resources=[]]
16:05:13,100 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:13,100 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819"
16:05:13,101 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=26
16:05:13,101 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,101 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="26") enlisted in transactional cache
16:05:13,101 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" being inserted into table "`DOMAIN_EVENT`"
16:05:13,102 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,102 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-6, enlisted resources=[]]
16:05:13,102 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6"
16:05:13,102 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,102 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,102 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,103 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'e371e972-ad92-4adc-8255-d1cfb8dbf863'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-05 16:05:13.1>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<26>)]
16:05:13,103 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d"
16:05:13,103 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,103 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,103 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,103 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,104 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "26"
16:05:13,104 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,104 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="26") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,104 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,104 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,104 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,104 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="26") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,104 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c]]
16:05:13,104 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,106 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,107 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,107 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") was evicted from transactional cache
16:05:13,107 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:05:13,107 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,107 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,108 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,108 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,108 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@38089a5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a"
16:05:13,108 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,109 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:05:13,109 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:05:13,109 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,109 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,110 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,110 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,110 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,110 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,110 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,110 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,111 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,111 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:05:13,113 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1117220444-7, enlisted resources=[]]
16:05:13,113 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:05:13,113 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61"
16:05:13,113 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=27
16:05:13,113 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,113 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="27") enlisted in transactional cache
16:05:13,113 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" being inserted into table "`DOMAIN_EVENT`"
16:05:13,113 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:05:13,113 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1117220444-7, enlisted resources=[]]
16:05:13,114 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59"
16:05:13,114 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:05:13,114 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") is having the value in field "timeStamp" replaced by a SCO wrapper
16:05:13,115 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:05:13,115 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'925395ed-d711-4068-a681-12fb4db99b37'>,<'ed41c9a4-395d-4574-af6d-dc6146d78324'>,<'{"cartId":"925395ed-d711-4068-a681-12fb4db99b37","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-05 16:05:13.112>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<27>)]
16:05:13,115 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1"
16:05:13,115 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:05:13,115 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:05:13,115 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,115 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:05:13,115 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "27"
16:05:13,116 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,116 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="27") lifecycle state "P_NEW" added to the list of reachables on commit.
16:05:13,116 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:05:13,116 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:05:13,116 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:05:13,116 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="27") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:05:13,116 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1117220444-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f]]
16:05:13,116 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,118 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:05:13,118 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") has a lifecycle change : "P_NEW"->"HOLLOW"
16:05:13,118 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") was evicted from transactional cache
16:05:13,118 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:05:13,118 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:05:13,118 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:05:13,118 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:05:13,119 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:05:13,119 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@764faa6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832"
16:05:13,119 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'925395ed-d711-4068-a681-12fb4db99b37'>
16:05:13,120 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:05:13,120 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
16:05:13,120 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,120 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:05:13,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:05:13,121 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:05:13,123 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:03,593 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
16:17:03,612 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
16:17:03,625 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
16:17:03,631 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
16:17:03,633 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
16:17:03,643 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
16:17:03,646 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
16:17:03,649 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
16:17:03,655 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
16:17:03,657 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
16:17:03,677 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
16:17:03,696 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
16:17:03,740 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
16:17:03,740 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
16:17:03,771 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : int[],java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,byte[],java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
16:17:03,772 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.Long,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.lang.Long,java.util.Date,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.lang.Long,java.util.Date,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.lang.Long,java.util.Date,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Long,java.lang.Double,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.lang.Long,java.util.Date,java.sql.Timestamp,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.sql.Date,java.util.Date,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.lang.Long,java.util.Date,java.lang.String,java.sql.Time
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.sql.Date,int[],java.util.Date,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.Long,java.lang.String,java.sql.Time
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : int[],java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.String,java.lang.Integer
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.sql.Date,int[],java.util.Date,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
16:17:03,773 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : [Ljava.lang.Object;,java.util.Date,java.sql.Timestamp,java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.Long,java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
16:17:03,774 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
16:17:03,774 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
16:17:03,816 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
16:17:03,833 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
16:17:03,834 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
16:17:03,835 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
16:17:03,835 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
16:17:03,835 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
16:17:03,836 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
16:17:03,836 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
16:17:03,836 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
16:17:03,836 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
16:17:03,836 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
16:17:03,836 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
16:17:03,837 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
16:17:03,837 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
16:17:03,837 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
16:17:03,837 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
16:17:03,837 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
16:17:03,837 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
16:17:03,838 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,838 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,838 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,838 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,838 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,839 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,839 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:17:03,840 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
16:17:03,841 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
16:17:03,844 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
16:17:03,846 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
16:17:03,945 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
16:17:03,945 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
16:17:03,945 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
16:17:03,956 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
16:17:04,209 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
16:17:04,242 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
16:17:04,243 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
16:17:04,244 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
16:17:04,245 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
16:17:04,248 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
16:17:04,249 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
16:17:04,249 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
16:17:04,249 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
16:17:04,249 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
16:17:04,278 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507200424261`.`UNUSED`" added to internal representation of table.
16:17:04,284 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507200424261`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
16:17:04,308 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 24 ms
16:17:04,318 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
16:17:04,318 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507200424261` CASCADE
16:17:04,331 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 13 ms
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
16:17:04,332 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
16:17:04,333 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
16:17:04,333 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
16:17:04,333 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5c909414, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,333 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
16:17:04,335 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
16:17:04,340 (main) DEBUG [DataNucleus.Persistence] - ================================================
16:17:04,358 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@1139b2f3" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@79ad8b2f" with txn="org.datanucleus.TransactionImpl@7a69b07"
16:17:04,699 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
16:17:04,712 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 13 ms
16:17:04,712 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
16:17:04,713 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
16:17:04,724 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
16:17:04,724 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
16:17:04,724 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
16:17:04,726 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
16:17:04,726 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
16:17:04,727 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,727 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:17:04,727 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
16:17:04,728 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
16:17:04,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
16:17:04,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
16:17:04,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
16:17:04,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:17:04,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
16:17:04,731 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
16:17:04,731 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b" with isolation "serializable"
16:17:04,732 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
16:17:04,733 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
16:17:04,743 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 10 ms
16:17:04,743 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
16:17:04,748 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
16:17:04,751 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
16:17:04,752 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
16:17:04,753 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
16:17:04,753 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
16:17:04,753 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,754 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,781 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
16:17:04,792 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 78 ms
16:17:04,793 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,793 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,801 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@791d1f8b: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a"
16:17:04,803 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,803 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:17:04,805 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 12 ms
16:17:04,805 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,806 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,840 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-1, enlisted resources=[]]
16:17:04,840 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,841 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00"
16:17:04,849 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
16:17:04,849 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:17:04,849 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
16:17:04,850 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,850 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
16:17:04,850 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1b45c0e: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
16:17:04,850 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
16:17:04,851 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:17:04,851 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
16:17:04,851 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
16:17:04,851 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
16:17:04,851 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
16:17:04,851 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
16:17:04,851 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
16:17:04,852 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,854 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,854 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=31
16:17:04,856 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,856 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="31") enlisted in transactional cache
16:17:04,860 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" being inserted into table "`DOMAIN_EVENT`"
16:17:04,863 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,865 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-1, enlisted resources=[]]
16:17:04,865 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a"
16:17:04,866 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,869 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,869 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,870 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'595da280-2c49-4a65-b07b-92bf375e17fa'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","custId":"3f91e986-290c-40ee-8bb3-7c39bcc47374"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 16:17:04.839>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<31>)]
16:17:04,870 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40"
16:17:04,870 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,871 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,871 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,871 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,871 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "31"
16:17:04,871 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,872 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="31") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,872 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,872 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,872 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,873 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="31") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,873 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12]]
16:17:04,873 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,876 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,876 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,876 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") was evicted from transactional cache
16:17:04,877 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 8 ms
16:17:04,877 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,877 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,877 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,878 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,878 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@37e4d7bb: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318"
16:17:04,879 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,879 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:17:04,879 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
16:17:04,879 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,879 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,881 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,881 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,882 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:04,898 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-2, enlisted resources=[]]
16:17:04,898 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,898 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82"
16:17:04,898 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=32
16:17:04,898 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,898 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="32") enlisted in transactional cache
16:17:04,898 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" being inserted into table "`DOMAIN_EVENT`"
16:17:04,899 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,899 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-2, enlisted resources=[]]
16:17:04,899 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68"
16:17:04,899 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,899 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,899 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,899 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'167c9444-6de2-4a5a-8fb4-fd08b3fa9d3e'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-05 16:17:04.898>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<32>)]
16:17:04,900 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03"
16:17:04,900 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "32"
16:17:04,900 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="32") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,900 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,900 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="32") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,900 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d]]
16:17:04,900 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,902 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,902 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,902 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") was evicted from transactional cache
16:17:04,903 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:17:04,903 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,903 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,903 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,903 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,903 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@58ce9668: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741"
16:17:04,903 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,904 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:17:04,904 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:17:04,904 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,904 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,904 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,904 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,905 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,905 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:04,909 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-3, enlisted resources=[]]
16:17:04,909 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,909 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f"
16:17:04,910 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=33
16:17:04,910 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,910 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="33") enlisted in transactional cache
16:17:04,910 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" being inserted into table "`DOMAIN_EVENT`"
16:17:04,910 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,910 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-3, enlisted resources=[]]
16:17:04,910 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385"
16:17:04,910 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,911 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,911 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,911 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'3538b6ac-10bc-434b-a391-39d2fb243e5b'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-05 16:17:04.909>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<33>)]
16:17:04,911 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23"
16:17:04,911 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "33"
16:17:04,912 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="33") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,912 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,912 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="33") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,912 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf]]
16:17:04,912 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,914 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,915 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,915 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") was evicted from transactional cache
16:17:04,915 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:17:04,915 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,916 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,916 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,916 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,916 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@6af9fcb2: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2"
16:17:04,916 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,917 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:17:04,917 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:17:04,917 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,917 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,917 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,917 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,917 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,918 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,918 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:04,918 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-4, enlisted resources=[]]
16:17:04,918 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,919 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c"
16:17:04,919 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=34
16:17:04,919 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,919 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="34") enlisted in transactional cache
16:17:04,919 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" being inserted into table "`DOMAIN_EVENT`"
16:17:04,919 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,919 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-4, enlisted resources=[]]
16:17:04,920 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5"
16:17:04,920 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,920 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,920 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,920 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'20b77336-26b0-4d11-8b74-ad2b463ebdee'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-05 16:17:04.918>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<34>)]
16:17:04,921 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b"
16:17:04,921 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "34"
16:17:04,921 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="34") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,921 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,921 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="34") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,922 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a]]
16:17:04,922 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,924 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,924 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,924 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") was evicted from transactional cache
16:17:04,924 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:17:04,924 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,924 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,925 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,925 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,925 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@512baff6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1"
16:17:04,925 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,926 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:17:04,926 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:17:04,926 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,926 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,926 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,926 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,926 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,927 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,927 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,927 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:04,928 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-5, enlisted resources=[]]
16:17:04,928 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,928 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575"
16:17:04,928 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=35
16:17:04,928 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,928 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="35") enlisted in transactional cache
16:17:04,928 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" being inserted into table "`DOMAIN_EVENT`"
16:17:04,929 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,929 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-5, enlisted resources=[]]
16:17:04,929 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572"
16:17:04,929 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,929 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,929 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,929 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'7356c941-30a8-4825-b151-646e8e1ea52f'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-05 16:17:04.928>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<35>)]
16:17:04,930 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961"
16:17:04,930 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "35"
16:17:04,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="35") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,930 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="35") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,930 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24]]
16:17:04,930 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,933 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,933 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,933 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") was evicted from transactional cache
16:17:04,933 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:17:04,934 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,934 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,934 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,935 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,935 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@c9d0d6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30"
16:17:04,935 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,935 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:17:04,935 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:17:04,935 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,935 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,936 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,936 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,936 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,936 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,936 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,936 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,936 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:04,937 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-6, enlisted resources=[]]
16:17:04,937 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,937 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819"
16:17:04,937 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=36
16:17:04,938 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,938 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="36") enlisted in transactional cache
16:17:04,938 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" being inserted into table "`DOMAIN_EVENT`"
16:17:04,938 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,938 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-6, enlisted resources=[]]
16:17:04,938 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6"
16:17:04,938 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,938 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,939 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,939 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'065badf3-2c21-420b-82fe-44fd182ac5d9'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-05 16:17:04.937>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<36>)]
16:17:04,939 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d"
16:17:04,939 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "36"
16:17:04,939 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="36") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,939 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,940 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="36") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,940 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c]]
16:17:04,940 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,942 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,942 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,942 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") was evicted from transactional cache
16:17:04,942 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:17:04,943 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,943 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,943 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,943 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,944 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@38089a5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a"
16:17:04,944 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,944 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:17:04,944 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:17:04,944 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,944 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,945 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,945 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,945 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,945 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,945 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,945 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,946 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,946 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:17:04,947 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-951540270-7, enlisted resources=[]]
16:17:04,947 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:17:04,947 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61"
16:17:04,948 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=37
16:17:04,948 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,948 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="37") enlisted in transactional cache
16:17:04,948 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" being inserted into table "`DOMAIN_EVENT`"
16:17:04,948 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:17:04,948 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-951540270-7, enlisted resources=[]]
16:17:04,949 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59"
16:17:04,949 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:17:04,949 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") is having the value in field "timeStamp" replaced by a SCO wrapper
16:17:04,949 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:17:04,949 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>,<'efb25630-e96c-497d-8a77-3434a0c91e9b'>,<'{"cartId":"2c95af18-f90a-4306-9e4f-34d41ddf8caa","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-05 16:17:04.947>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<37>)]
16:17:04,950 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1"
16:17:04,950 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "37"
16:17:04,950 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="37") lifecycle state "P_NEW" added to the list of reachables on commit.
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:17:04,950 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:17:04,950 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="37") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:17:04,950 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-951540270-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f]]
16:17:04,950 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,952 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:17:04,952 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") has a lifecycle change : "P_NEW"->"HOLLOW"
16:17:04,952 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") was evicted from transactional cache
16:17:04,953 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:17:04,953 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:17:04,953 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:17:04,953 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:17:04,953 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:17:04,953 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@764faa6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832"
16:17:04,953 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'2c95af18-f90a-4306-9e4f-34d41ddf8caa'>
16:17:04,954 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:17:04,954 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:17:04,954 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,954 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:17:04,954 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:17:04,954 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:17:04,957 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:17,266 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
16:42:17,280 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
16:42:17,289 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
16:42:17,295 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
16:42:17,296 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
16:42:17,308 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
16:42:17,310 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
16:42:17,313 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
16:42:17,318 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
16:42:17,320 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
16:42:17,339 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
16:42:17,360 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
16:42:17,417 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
16:42:17,417 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
16:42:17,457 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : int[],java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,byte[],java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
16:42:17,459 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.Long,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.lang.Long,java.util.Date,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.lang.Long,java.util.Date,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.lang.Long,java.util.Date,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Long,java.lang.Double,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.lang.Long,java.util.Date,java.sql.Timestamp,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.sql.Date,java.util.Date,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.lang.Long,java.util.Date,java.lang.String,java.sql.Time
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.sql.Date,int[],java.util.Date,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.Long,java.lang.String,java.sql.Time
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : int[],java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.String,java.lang.Integer
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.sql.Date,int[],java.util.Date,java.lang.String
16:42:17,460 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : [Ljava.lang.Object;,java.util.Date,java.sql.Timestamp,java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.Long,java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
16:42:17,461 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
16:42:17,462 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
16:42:17,494 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
16:42:17,512 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
16:42:17,512 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
16:42:17,513 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
16:42:17,513 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
16:42:17,513 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
16:42:17,514 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
16:42:17,514 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
16:42:17,514 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
16:42:17,514 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
16:42:17,514 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
16:42:17,515 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,516 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
16:42:17,517 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
16:42:17,518 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
16:42:17,519 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
16:42:17,520 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
16:42:17,604 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
16:42:17,604 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
16:42:17,605 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
16:42:17,612 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
16:42:17,843 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
16:42:17,874 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
16:42:17,875 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
16:42:17,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507201937892`.`UNUSED`" added to internal representation of table.
16:42:17,907 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507201937892`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
16:42:17,931 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 24 ms
16:42:17,946 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
16:42:17,946 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507201937892` CASCADE
16:42:17,961 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 15 ms
16:42:17,962 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
16:42:17,962 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
16:42:17,962 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
16:42:17,962 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
16:42:17,962 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
16:42:17,962 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
16:42:17,963 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
16:42:17,963 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5c909414, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:17,964 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
16:42:17,966 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
16:42:17,970 (main) DEBUG [DataNucleus.Persistence] - ================================================
16:42:17,988 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@1139b2f3" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@79ad8b2f" with txn="org.datanucleus.TransactionImpl@7a69b07"
16:42:18,324 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
16:42:18,338 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 14 ms
16:42:18,339 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
16:42:18,340 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
16:42:18,350 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
16:42:18,350 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
16:42:18,350 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
16:42:18,352 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
16:42:18,352 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
16:42:18,353 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
16:42:18,354 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
16:42:18,356 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
16:42:18,356 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b" with isolation "serializable"
16:42:18,357 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
16:42:18,357 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
16:42:18,366 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 9 ms
16:42:18,366 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
16:42:18,371 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
16:42:18,376 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
16:42:18,378 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
16:42:18,379 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
16:42:18,380 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
16:42:18,380 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,380 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,408 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
16:42:18,415 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 75 ms
16:42:18,416 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,416 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,423 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@791d1f8b: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a"
16:42:18,425 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,426 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:42:18,428 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 12 ms
16:42:18,428 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,428 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,463 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-1, enlisted resources=[]]
16:42:18,463 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,463 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00"
16:42:18,472 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
16:42:18,472 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
16:42:18,472 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
16:42:18,473 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,473 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
16:42:18,474 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1b45c0e: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
16:42:18,474 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
16:42:18,474 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:42:18,474 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
16:42:18,474 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
16:42:18,475 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 1 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
16:42:18,475 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
16:42:18,475 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
16:42:18,475 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
16:42:18,475 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,478 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,478 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=41
16:42:18,480 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,480 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="41") enlisted in transactional cache
16:42:18,485 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" being inserted into table "`DOMAIN_EVENT`"
16:42:18,488 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,489 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-1, enlisted resources=[]]
16:42:18,490 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a"
16:42:18,490 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,492 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,493 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,493 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'1a45be16-096e-4c58-85b9-ed9a43056c66'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","custId":"827ad9b4-61b0-4059-b14a-c7961be488cb"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 16:42:18.462>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<41>)]
16:42:18,494 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40"
16:42:18,494 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,495 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,495 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,495 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,495 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "41"
16:42:18,495 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,495 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="41") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,496 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,496 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,496 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,496 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="41") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,497 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12]]
16:42:18,497 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,500 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,501 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,501 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") was evicted from transactional cache
16:42:18,501 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 8 ms
16:42:18,502 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,502 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,502 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,503 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,504 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@37e4d7bb: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318"
16:42:18,504 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,504 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:42:18,504 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
16:42:18,504 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,505 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,506 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,507 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,507 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:18,524 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-2, enlisted resources=[]]
16:42:18,524 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,524 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82"
16:42:18,525 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=42
16:42:18,525 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,525 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="42") enlisted in transactional cache
16:42:18,525 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" being inserted into table "`DOMAIN_EVENT`"
16:42:18,525 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,525 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-2, enlisted resources=[]]
16:42:18,525 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68"
16:42:18,525 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,526 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,526 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,526 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'c68aebc9-d4a3-4534-a466-cfbdbb9a3f8e'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-05 16:42:18.524>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<42>)]
16:42:18,526 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03"
16:42:18,526 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,526 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "42"
16:42:18,527 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="42") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,527 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,527 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="42") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,527 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d]]
16:42:18,527 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,529 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,529 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,529 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") was evicted from transactional cache
16:42:18,529 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:42:18,530 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,530 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,530 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,530 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,530 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@58ce9668: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741"
16:42:18,530 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,531 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:42:18,531 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:42:18,531 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,531 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,531 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,532 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,532 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,532 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:18,537 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-3, enlisted resources=[]]
16:42:18,537 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,537 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f"
16:42:18,537 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=43
16:42:18,537 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,537 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="43") enlisted in transactional cache
16:42:18,537 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" being inserted into table "`DOMAIN_EVENT`"
16:42:18,538 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,538 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-3, enlisted resources=[]]
16:42:18,538 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385"
16:42:18,538 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,538 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,538 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,539 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'e36e7e3f-5df5-49bf-9a49-e85150830a2c'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-05 16:42:18.537>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<43>)]
16:42:18,539 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23"
16:42:18,539 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "43"
16:42:18,539 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="43") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,539 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,539 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="43") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,539 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf]]
16:42:18,540 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,542 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,542 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,542 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") was evicted from transactional cache
16:42:18,542 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
16:42:18,542 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,542 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,542 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,543 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,543 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@6af9fcb2: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2"
16:42:18,543 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,543 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:42:18,543 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:42:18,543 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,544 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,544 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,544 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,544 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,544 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,544 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:18,545 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-4, enlisted resources=[]]
16:42:18,545 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,545 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c"
16:42:18,545 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=44
16:42:18,545 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,545 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="44") enlisted in transactional cache
16:42:18,545 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" being inserted into table "`DOMAIN_EVENT`"
16:42:18,545 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,546 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-4, enlisted resources=[]]
16:42:18,546 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5"
16:42:18,546 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,546 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,546 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,546 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'e676efab-1364-4f6d-8aac-db32c634803d'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-05 16:42:18.545>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<44>)]
16:42:18,547 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b"
16:42:18,547 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "44"
16:42:18,547 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="44") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,547 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,547 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="44") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,547 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a]]
16:42:18,547 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,551 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,551 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,551 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") was evicted from transactional cache
16:42:18,551 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
16:42:18,552 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,552 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,552 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,552 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,553 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@512baff6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1"
16:42:18,553 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,553 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:42:18,553 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:42:18,553 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,553 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,553 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,553 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,553 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,554 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,554 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,554 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:18,554 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-5, enlisted resources=[]]
16:42:18,554 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,555 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575"
16:42:18,555 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=45
16:42:18,555 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,555 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="45") enlisted in transactional cache
16:42:18,555 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" being inserted into table "`DOMAIN_EVENT`"
16:42:18,555 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,555 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-5, enlisted resources=[]]
16:42:18,555 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572"
16:42:18,555 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,556 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,556 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,556 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'6d507207-1445-48ef-84a8-3e66804fb5bd'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-05 16:42:18.554>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<45>)]
16:42:18,556 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961"
16:42:18,556 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,556 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,556 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,556 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,557 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "45"
16:42:18,557 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,557 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="45") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,557 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,557 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,557 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,557 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="45") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,557 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24]]
16:42:18,557 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,559 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,559 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,559 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") was evicted from transactional cache
16:42:18,559 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:42:18,560 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,560 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,560 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,561 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,561 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@c9d0d6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30"
16:42:18,561 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,561 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:42:18,561 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:42:18,561 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,561 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,562 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,562 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,562 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,562 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,562 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,562 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,563 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:18,564 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-6, enlisted resources=[]]
16:42:18,564 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,564 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819"
16:42:18,564 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=46
16:42:18,564 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,564 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="46") enlisted in transactional cache
16:42:18,564 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" being inserted into table "`DOMAIN_EVENT`"
16:42:18,565 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,565 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-6, enlisted resources=[]]
16:42:18,565 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6"
16:42:18,565 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,565 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,566 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,566 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'34d5d8fd-c88b-44d0-82c8-6f9871efb6d0'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-05 16:42:18.564>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<46>)]
16:42:18,566 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d"
16:42:18,566 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,566 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,566 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,566 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,567 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "46"
16:42:18,567 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,567 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="46") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,567 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,567 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,567 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,567 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="46") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,567 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c]]
16:42:18,567 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,574 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,574 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,574 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") was evicted from transactional cache
16:42:18,574 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 8 ms
16:42:18,575 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,575 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,575 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,576 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,576 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@38089a5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a"
16:42:18,576 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,576 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
16:42:18,576 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:42:18,576 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,577 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,577 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,577 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,578 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,578 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,578 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,578 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,578 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,579 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
16:42:18,580 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-566957286-7, enlisted resources=[]]
16:42:18,581 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
16:42:18,581 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61"
16:42:18,581 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=47
16:42:18,581 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,581 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="47") enlisted in transactional cache
16:42:18,581 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" being inserted into table "`DOMAIN_EVENT`"
16:42:18,581 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
16:42:18,581 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-566957286-7, enlisted resources=[]]
16:42:18,582 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59"
16:42:18,582 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
16:42:18,582 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") is having the value in field "timeStamp" replaced by a SCO wrapper
16:42:18,583 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
16:42:18,583 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>,<'8fae545f-55c1-41f7-9aec-6978d143c0ed'>,<'{"cartId":"0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-05 16:42:18.58>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<47>)]
16:42:18,583 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1"
16:42:18,583 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "47"
16:42:18,584 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="47") lifecycle state "P_NEW" added to the list of reachables on commit.
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
16:42:18,584 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
16:42:18,584 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="47") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
16:42:18,584 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-566957286-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f]]
16:42:18,584 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,586 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
16:42:18,586 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") has a lifecycle change : "P_NEW"->"HOLLOW"
16:42:18,586 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") was evicted from transactional cache
16:42:18,586 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
16:42:18,587 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
16:42:18,587 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
16:42:18,587 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
16:42:18,587 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
16:42:18,587 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@764faa6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832"
16:42:18,587 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'0418ee5d-c0ad-4ef6-9dc3-f021c21f21c4'>
16:42:18,588 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
16:42:18,588 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
16:42:18,588 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,588 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
16:42:18,588 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:41") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,588 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:42") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,588 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:43") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,588 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:44") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,588 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:45") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,589 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:46") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
16:42:18,589 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
16:42:18,589 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
16:42:18,593 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:47") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:11:26,995 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
18:11:27,008 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
18:11:27,019 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:11:27,024 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:11:27,025 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
18:11:27,033 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:11:27,035 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:11:27,038 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
18:11:27,043 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:11:27,046 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:11:27,063 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:11:27,068 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:11:27,082 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
18:11:27,115 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
18:11:27,115 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
18:11:27,135 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
18:11:27,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
18:11:27,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
18:11:27,138 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
18:11:27,138 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
18:11:27,138 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
18:11:27,138 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
18:11:27,138 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
18:11:27,138 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
18:11:27,138 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
18:11:27,164 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
18:11:27,176 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
18:11:27,177 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
18:11:27,177 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
18:11:27,177 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
18:11:27,177 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
18:11:27,178 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
18:11:27,178 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
18:11:27,178 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
18:11:27,178 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
18:11:27,178 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
18:11:27,179 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
18:11:27,179 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
18:11:27,179 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
18:11:27,179 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
18:11:27,179 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
18:11:27,179 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,180 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:11:27,182 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
18:11:27,182 (main) ERROR [DataNucleus.MetaData] - Found Meta-Data for class com.metamagic.droit.eventsourcing.model.DomainEvent but this class is either not enhanced or you have multiple copies of the persistence API jar in your CLASSPATH!! Make sure all persistable classes are enhanced before running DataNucleus and/or the CLASSPATH is correct.
org.datanucleus.exceptions.NucleusUserException: Found Meta-Data for class com.metamagic.droit.eventsourcing.model.DomainEvent but this class is either not enhanced or you have multiple copies of the persistence API jar in your CLASSPATH!! Make sure all persistable classes are enhanced before running DataNucleus and/or the CLASSPATH is correct.
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseClassMetaData(MetaDataManagerImpl.java:2749)
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseFileMetaData(MetaDataManagerImpl.java:2684)
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseFileMetaDataForUse(MetaDataManagerImpl.java:1367)
	at org.datanucleus.metadata.MetaDataManagerImpl.loadPersistenceUnit(MetaDataManagerImpl.java:1130)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.initialiseMetaData(JDOPersistenceManagerFactory.java:797)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:600)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:316)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:225)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at javax.jdo.JDOHelper$16.run(JDOHelper.java:1975)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.jdo.JDOHelper.invoke(JDOHelper.java:1970)
	at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1177)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:851)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1109)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:924)
	at com.metamagic.desire.examples.PMFConfig.<clinit>(PMFConfig.java:15)
	at com.metamagic.desire.examples.TestClass.<init>(TestClass.java:29)
	at com.metamagic.desire.examples.TestClass.main(TestClass.java:97)

18:14:23,057 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
18:14:23,072 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
18:14:23,081 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:14:23,086 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:14:23,087 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
18:14:23,095 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:14:23,098 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:14:23,101 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
18:14:23,105 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:14:23,108 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:14:23,126 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:14:23,132 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:14:23,145 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
18:14:23,184 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
18:14:23,185 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
18:14:23,204 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
18:14:23,205 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
18:14:23,206 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
18:14:23,207 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
18:14:23,208 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
18:14:23,208 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
18:14:23,208 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
18:14:23,235 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
18:14:23,248 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
18:14:23,249 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
18:14:23,250 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
18:14:23,250 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
18:14:23,250 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
18:14:23,250 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
18:14:23,251 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
18:14:23,251 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
18:14:23,251 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
18:14:23,251 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
18:14:23,251 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
18:14:23,251 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,252 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,253 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,253 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,253 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,253 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,253 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:14:23,254 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
18:14:23,254 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
18:14:23,255 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
18:14:23,257 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
18:14:23,327 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
18:14:23,328 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
18:14:23,328 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
18:14:23,335 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
18:14:23,525 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
18:14:23,551 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
18:14:23,551 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
18:14:23,551 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
18:14:23,551 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
18:14:23,551 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
18:14:23,551 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
18:14:23,552 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
18:14:23,577 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507207463562`.`UNUSED`" added to internal representation of table.
18:14:23,581 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507207463562`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
18:14:23,599 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 18 ms
18:14:23,606 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
18:14:23,606 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507207463562` CASCADE
18:14:23,614 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 8 ms
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
18:14:23,615 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
18:14:23,616 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:23,616 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
18:14:23,617 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
18:14:23,620 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
18:14:23,621 (main) DEBUG [DataNucleus.Persistence] - ================================================
18:14:23,633 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
18:14:23,875 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
18:14:23,886 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 11 ms
18:14:23,886 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
18:14:23,887 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
18:14:23,899 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
18:14:23,900 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
18:14:23,900 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
18:14:23,902 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
18:14:23,902 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
18:14:23,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:23,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:14:23,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
18:14:23,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:23,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:14:23,903 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
18:14:23,904 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
18:14:23,905 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
18:14:23,905 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:23,905 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:14:23,905 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
18:14:23,906 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
18:14:23,906 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179" with isolation "serializable"
18:14:23,907 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
18:14:23,908 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
18:14:23,921 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 13 ms
18:14:23,921 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
18:14:23,926 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
18:14:23,929 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
18:14:23,930 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
18:14:23,931 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
18:14:23,931 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
18:14:23,931 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:23,931 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:23,950 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
18:14:23,957 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 70 ms
18:14:23,957 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:23,958 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:23,964 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@14f232c4: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551"
18:14:23,966 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:23,967 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:14:23,968 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 11 ms
18:14:23,969 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:23,969 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,003 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-1, enlisted resources=[]]
18:14:24,003 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,003 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc"
18:14:24,011 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
18:14:24,011 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:14:24,011 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
18:14:24,012 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,013 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
18:14:24,013 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@10f7f7de: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
18:14:24,013 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
18:14:24,014 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:14:24,014 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
18:14:24,014 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
18:14:24,014 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
18:14:24,014 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
18:14:24,014 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6bf08014"
18:14:24,014 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
18:14:24,015 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,018 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,019 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=61
18:14:24,020 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,020 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="61") enlisted in transactional cache
18:14:24,024 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" being inserted into table "`DOMAIN_EVENT`"
18:14:24,028 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,029 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-1, enlisted resources=[]]
18:14:24,029 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828"
18:14:24,029 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,032 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,032 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,033 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'55967b8f-d808-4acf-bae2-67e42c01a387'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","custId":"a878c776-3fa2-408d-a003-af4524a541f5"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 18:14:24.002>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<61>)]
18:14:24,034 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0"
18:14:24,034 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,035 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,035 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,035 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,035 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "61"
18:14:24,035 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,035 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="61") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,036 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,036 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,036 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,036 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="61") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,037 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8]]
18:14:24,037 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,039 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,040 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,040 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") was evicted from transactional cache
18:14:24,040 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 7 ms
18:14:24,041 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,041 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,041 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,043 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,044 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@74a6f9c1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb"
18:14:24,044 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,045 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:14:24,045 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 4 ms
18:14:24,045 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,045 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,047 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,048 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,049 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:14:24,069 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-2, enlisted resources=[]]
18:14:24,069 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,069 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6"
18:14:24,069 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=62
18:14:24,069 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,069 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="62") enlisted in transactional cache
18:14:24,069 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" being inserted into table "`DOMAIN_EVENT`"
18:14:24,070 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,070 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-2, enlisted resources=[]]
18:14:24,070 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517"
18:14:24,070 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,070 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,070 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,070 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'7bab9580-6d12-4a85-9d82-c70b45bd8d72'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-05 18:14:24.069>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<62>)]
18:14:24,071 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4"
18:14:24,071 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "62"
18:14:24,071 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="62") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,071 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,071 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="62") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,072 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03]]
18:14:24,072 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,074 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,075 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,075 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") was evicted from transactional cache
18:14:24,075 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
18:14:24,075 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,075 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,075 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,075 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,076 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@56673b2c: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013"
18:14:24,076 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,076 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:14:24,076 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:14:24,076 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,076 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,077 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,077 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,077 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,077 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:14:24,084 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-3, enlisted resources=[]]
18:14:24,085 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,085 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54"
18:14:24,085 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=63
18:14:24,085 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,085 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="63") enlisted in transactional cache
18:14:24,085 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" being inserted into table "`DOMAIN_EVENT`"
18:14:24,085 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,085 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-3, enlisted resources=[]]
18:14:24,086 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722"
18:14:24,086 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,086 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,086 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,086 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'a0b27625-daf3-4cd9-a4a4-3b302e8b50dd'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-05 18:14:24.084>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<63>)]
18:14:24,087 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6"
18:14:24,087 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,087 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,087 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,087 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,087 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "63"
18:14:24,087 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,088 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="63") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,088 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,088 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,088 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,088 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="63") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,088 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23]]
18:14:24,088 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,090 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,091 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,091 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") was evicted from transactional cache
18:14:24,091 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
18:14:24,091 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,091 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,091 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,092 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,092 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@7efaad5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4"
18:14:24,092 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,092 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:14:24,093 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:14:24,093 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,093 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,093 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,093 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,093 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,093 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,094 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:14:24,094 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-4, enlisted resources=[]]
18:14:24,094 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,094 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517"
18:14:24,095 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=64
18:14:24,095 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,095 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="64") enlisted in transactional cache
18:14:24,095 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" being inserted into table "`DOMAIN_EVENT`"
18:14:24,095 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,095 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-4, enlisted resources=[]]
18:14:24,095 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0"
18:14:24,095 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,096 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,096 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,096 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'75211aed-4ab5-472b-9774-c3665533c57a'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-05 18:14:24.094>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<64>)]
18:14:24,097 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b"
18:14:24,097 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,097 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,097 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,097 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,097 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "64"
18:14:24,097 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,098 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="64") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,098 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,098 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,098 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,098 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="64") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,098 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b]]
18:14:24,098 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,101 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,101 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,101 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") was evicted from transactional cache
18:14:24,101 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
18:14:24,102 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,102 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,102 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,102 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,102 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1c93f6e1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35"
18:14:24,103 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,103 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:14:24,103 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:14:24,103 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,103 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,103 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,104 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,104 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,104 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,104 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,104 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:14:24,105 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-5, enlisted resources=[]]
18:14:24,105 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,105 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961"
18:14:24,105 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=65
18:14:24,105 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,105 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="65") enlisted in transactional cache
18:14:24,105 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" being inserted into table "`DOMAIN_EVENT`"
18:14:24,106 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,106 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-5, enlisted resources=[]]
18:14:24,106 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f"
18:14:24,106 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,106 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,107 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,107 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'61374c7d-ad0e-48ca-b5d6-7fb4e6623b1c'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-05 18:14:24.105>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<65>)]
18:14:24,107 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54"
18:14:24,107 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,107 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,107 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,107 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,107 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "65"
18:14:24,107 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,107 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="65") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,108 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,108 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,108 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,108 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="65") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,108 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961]]
18:14:24,108 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,110 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,110 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,110 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") was evicted from transactional cache
18:14:24,110 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
18:14:24,111 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,111 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,111 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,111 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,112 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@3adcc812: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f"
18:14:24,112 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,112 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:14:24,112 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:14:24,112 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,112 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,112 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,113 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,113 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,113 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,113 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,113 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,114 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:14:24,115 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-6, enlisted resources=[]]
18:14:24,115 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,115 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad"
18:14:24,115 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=66
18:14:24,115 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,115 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="66") enlisted in transactional cache
18:14:24,115 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" being inserted into table "`DOMAIN_EVENT`"
18:14:24,116 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,116 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-6, enlisted resources=[]]
18:14:24,117 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e"
18:14:24,117 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,117 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,117 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,117 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'57d6f2de-61d1-4db1-b01f-78f96b2c61f2'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-05 18:14:24.115>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<66>)]
18:14:24,118 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8"
18:14:24,118 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "66"
18:14:24,118 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="66") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,118 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,118 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="66") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,118 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d]]
18:14:24,118 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,120 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,121 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,121 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") was evicted from transactional cache
18:14:24,121 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
18:14:24,121 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,121 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,122 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,122 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,122 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@66c92293: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be"
18:14:24,122 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,123 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:14:24,123 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:14:24,123 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,123 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,123 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,124 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,124 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,124 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,124 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,124 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,124 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,124 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:14:24,126 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-562102533-7, enlisted resources=[]]
18:14:24,126 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
18:14:24,126 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b"
18:14:24,126 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=67
18:14:24,126 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,126 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="67") enlisted in transactional cache
18:14:24,126 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" being inserted into table "`DOMAIN_EVENT`"
18:14:24,127 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:14:24,127 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-562102533-7, enlisted resources=[]]
18:14:24,127 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a"
18:14:24,127 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:14:24,128 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") is having the value in field "timeStamp" replaced by a SCO wrapper
18:14:24,128 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:14:24,128 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>,<'47e324c5-3c3f-486f-a22f-4d2be896e15f'>,<'{"cartId":"fb2d5515-d6f3-4688-b2f9-a61613c096a5","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-05 18:14:24.126>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<67>)]
18:14:24,128 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870"
18:14:24,128 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
18:14:24,128 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "67"
18:14:24,129 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="67") lifecycle state "P_NEW" added to the list of reachables on commit.
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:14:24,129 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:14:24,129 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="67") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:14:24,129 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-562102533-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36]]
18:14:24,129 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,136 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:14:24,136 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") has a lifecycle change : "P_NEW"->"HOLLOW"
18:14:24,136 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") was evicted from transactional cache
18:14:24,136 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 8 ms
18:14:24,136 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:14:24,136 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:14:24,136 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:14:24,137 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:14:24,137 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@598bd2ba: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3"
18:14:24,137 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'fb2d5515-d6f3-4688-b2f9-a61613c096a5'>
18:14:24,138 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:14:24,138 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
18:14:24,138 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,138 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:61") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:62") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:63") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:64") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:65") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:66") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:14:24,138 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:14:24,138 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:14:24,141 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:67") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:55:25,068 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
18:55:25,086 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
18:55:25,099 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:55:25,104 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:55:25,106 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
18:55:25,116 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:55:25,119 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:55:25,122 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
18:55:25,128 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:55:25,131 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:55:25,160 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:55:25,167 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:55:25,181 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
18:55:25,251 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
18:55:25,251 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
18:55:25,285 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
18:55:25,286 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
18:55:25,287 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
18:55:25,288 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
18:55:25,289 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
18:55:25,290 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
18:55:25,291 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
18:55:25,322 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
18:55:25,337 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
18:55:25,337 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
18:55:25,338 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
18:55:25,338 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
18:55:25,339 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
18:55:25,339 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
18:55:25,339 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
18:55:25,340 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
18:55:25,340 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
18:55:25,340 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
18:55:25,340 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
18:55:25,340 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
18:55:25,341 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
18:55:25,341 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
18:55:25,341 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
18:55:25,341 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
18:55:25,341 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
18:55:25,342 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,342 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,343 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,343 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,343 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,343 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,343 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:55:25,344 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
18:55:25,345 (main) ERROR [DataNucleus.MetaData] - Found Meta-Data for class com.metamagic.droit.eventsourcing.model.DomainEvent but this class is either not enhanced or you have multiple copies of the persistence API jar in your CLASSPATH!! Make sure all persistable classes are enhanced before running DataNucleus and/or the CLASSPATH is correct.
org.datanucleus.exceptions.NucleusUserException: Found Meta-Data for class com.metamagic.droit.eventsourcing.model.DomainEvent but this class is either not enhanced or you have multiple copies of the persistence API jar in your CLASSPATH!! Make sure all persistable classes are enhanced before running DataNucleus and/or the CLASSPATH is correct.
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseClassMetaData(MetaDataManagerImpl.java:2749)
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseFileMetaData(MetaDataManagerImpl.java:2684)
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseFileMetaDataForUse(MetaDataManagerImpl.java:1367)
	at org.datanucleus.metadata.MetaDataManagerImpl.loadPersistenceUnit(MetaDataManagerImpl.java:1130)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.initialiseMetaData(JDOPersistenceManagerFactory.java:797)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:600)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:316)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:225)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at javax.jdo.JDOHelper$16.run(JDOHelper.java:1975)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.jdo.JDOHelper.invoke(JDOHelper.java:1970)
	at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1177)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:851)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1109)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:924)
	at com.metamagic.desire.examples.PMFConfig.<clinit>(PMFConfig.java:15)
	at com.metamagic.desire.examples.TestClass.<init>(TestClass.java:29)
	at com.metamagic.desire.examples.TestClass.main(TestClass.java:97)

18:57:15,851 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
18:57:15,870 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
18:57:15,883 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:57:15,888 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
18:57:15,889 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
18:57:15,898 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:57:15,899 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
18:57:15,902 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
18:57:15,906 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:57:15,909 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
18:57:15,927 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
18:57:15,949 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
18:57:15,985 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
18:57:15,985 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
18:57:16,013 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
18:57:16,013 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : int[],java.lang.String
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,byte[],java.lang.String
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
18:57:16,014 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.Long,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.lang.Long,java.util.Date,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.lang.Long,java.util.Date,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.lang.Long,java.util.Date,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Long,java.lang.Double,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.lang.Long,java.util.Date,java.sql.Timestamp,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.sql.Date,java.util.Date,java.lang.String
18:57:16,015 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.lang.Long,java.util.Date,java.lang.String,java.sql.Time
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.sql.Date,int[],java.util.Date,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.Long,java.lang.String,java.sql.Time
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : int[],java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.String,java.lang.Integer
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.sql.Date,int[],java.util.Date,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : [Ljava.lang.Object;,java.util.Date,java.sql.Timestamp,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.Long,java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
18:57:16,016 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
18:57:16,017 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
18:57:16,017 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
18:57:16,052 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
18:57:16,066 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
18:57:16,066 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
18:57:16,067 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
18:57:16,067 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
18:57:16,067 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
18:57:16,067 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
18:57:16,068 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,069 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
18:57:16,071 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
18:57:16,071 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
18:57:16,073 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
18:57:16,074 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
18:57:16,165 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
18:57:16,166 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
18:57:16,166 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
18:57:16,172 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
18:57:16,425 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
18:57:16,462 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
18:57:16,462 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
18:57:16,462 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
18:57:16,462 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
18:57:16,462 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
18:57:16,462 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
18:57:16,463 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
18:57:16,468 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
18:57:16,468 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
18:57:16,469 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
18:57:16,469 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
18:57:16,469 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
18:57:16,469 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
18:57:16,469 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
18:57:16,494 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507210036481`.`UNUSED`" added to internal representation of table.
18:57:16,497 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507210036481`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
18:57:16,522 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 24 ms
18:57:16,531 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
18:57:16,532 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507210036481` CASCADE
18:57:16,539 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 7 ms
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
18:57:16,540 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
18:57:16,541 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
18:57:16,541 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@534df152 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5c909414, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:16,542 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
18:57:16,544 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
18:57:16,549 (main) DEBUG [DataNucleus.Persistence] - ================================================
18:57:16,566 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@1139b2f3" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@79ad8b2f" with txn="org.datanucleus.TransactionImpl@7a69b07"
18:57:16,930 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
18:57:16,948 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 18 ms
18:57:16,948 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
18:57:16,949 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
18:57:16,963 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
18:57:16,964 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
18:57:16,965 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
18:57:16,967 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
18:57:16,968 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
18:57:16,969 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:16,969 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
18:57:16,970 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:16,971 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:57:16,971 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
18:57:16,971 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
18:57:16,971 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
18:57:16,971 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
18:57:16,972 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
18:57:16,972 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:16,972 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
18:57:16,972 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
18:57:16,975 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
18:57:16,975 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b" with isolation "serializable"
18:57:16,978 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
18:57:16,979 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
18:57:16,996 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 17 ms
18:57:16,996 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
18:57:17,002 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
18:57:17,005 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
18:57:17,007 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
18:57:17,009 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
18:57:17,009 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b"
18:57:17,010 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,010 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5fb759d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b8d604b, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,042 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
18:57:17,052 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 103 ms
18:57:17,053 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,053 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,061 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@791d1f8b: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a"
18:57:17,063 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,063 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,065 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 12 ms
18:57:17,065 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,066 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b5fad2d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@5e17553a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,099 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-1, enlisted resources=[]]
18:57:17,099 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,100 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00"
18:57:17,108 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
18:57:17,109 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
18:57:17,109 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
18:57:17,109 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,110 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
18:57:17,110 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1b45c0e: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
18:57:17,110 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
18:57:17,110 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,110 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87"
18:57:17,111 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
18:57:17,111 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
18:57:17,111 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@11f0a5a1"
18:57:17,111 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@50dfbc58"
18:57:17,111 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
18:57:17,112 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,118 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7cbd9d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1672fe87, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,119 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=81
18:57:17,120 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,120 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="81") enlisted in transactional cache
18:57:17,125 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" being inserted into table "`DOMAIN_EVENT`"
18:57:17,128 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,129 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-1, enlisted resources=[]]
18:57:17,129 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a"
18:57:17,129 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,132 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,132 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,133 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'d7702872-dbec-481f-9740-7aae1063b0ab'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","custId":"68361c52-2d73-48db-9a82-33d4f16eefa1"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-05 18:57:17.098>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<81>)]
18:57:17,133 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@20435c40"
18:57:17,134 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,134 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,134 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,134 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,135 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "81"
18:57:17,135 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,135 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="81") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,135 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,135 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,135 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,136 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="81") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,137 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@2141a12]]
18:57:17,137 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,139 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7b8b43c7 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@7aaca91a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,140 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,140 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") was evicted from transactional cache
18:57:17,140 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 7 ms
18:57:17,141 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,141 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,141 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,141 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,142 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@37e4d7bb: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318"
18:57:17,142 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,142 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,142 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,142 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,143 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,144 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,144 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@43b9fd5 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@79dc5318, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,145 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:57:17,162 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-2, enlisted resources=[]]
18:57:17,163 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,163 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82"
18:57:17,163 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=82
18:57:17,163 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,163 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="82") enlisted in transactional cache
18:57:17,163 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" being inserted into table "`DOMAIN_EVENT`"
18:57:17,164 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,164 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-2, enlisted resources=[]]
18:57:17,164 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68"
18:57:17,164 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,164 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,164 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,165 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'1352e1b7-9fa9-48d5-96b6-795b793f4d38'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-05 18:57:17.162>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<82>)]
18:57:17,165 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@68702e03"
18:57:17,165 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "82"
18:57:17,165 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="82") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,165 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,166 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="82") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,166 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5be46f9d]]
18:57:17,166 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,168 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@7164ca4c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4f3bbf68, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,168 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,168 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") was evicted from transactional cache
18:57:17,168 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
18:57:17,168 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,169 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,169 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,169 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,169 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@58ce9668: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741"
18:57:17,169 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,170 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,170 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,170 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,170 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,170 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,170 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,170 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@338c99c8 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@21ba0741, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,171 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:57:17,175 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-3, enlisted resources=[]]
18:57:17,175 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,175 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f"
18:57:17,175 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=83
18:57:17,175 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,175 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="83") enlisted in transactional cache
18:57:17,175 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" being inserted into table "`DOMAIN_EVENT`"
18:57:17,176 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,176 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-3, enlisted resources=[]]
18:57:17,176 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385"
18:57:17,176 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,176 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,176 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,177 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'d7fb894e-884c-46ec-846b-818df3a42405'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-05 18:57:17.175>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<83>)]
18:57:17,177 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@78641d23"
18:57:17,177 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "83"
18:57:17,177 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="83") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,177 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,177 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="83") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,177 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5f354bcf]]
18:57:17,177 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,180 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@67545b57 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6c2c1385, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,180 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,180 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") was evicted from transactional cache
18:57:17,180 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
18:57:17,180 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,180 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,180 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,181 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,181 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@6af9fcb2: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2"
18:57:17,181 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,181 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,181 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,181 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,182 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,182 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,182 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,182 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,182 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@2f67b837 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1869fbd2, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,182 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:57:17,183 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-4, enlisted resources=[]]
18:57:17,183 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,183 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c"
18:57:17,183 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=84
18:57:17,183 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,183 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="84") enlisted in transactional cache
18:57:17,183 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" being inserted into table "`DOMAIN_EVENT`"
18:57:17,184 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,184 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-4, enlisted resources=[]]
18:57:17,184 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5"
18:57:17,184 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,184 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,184 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,184 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'0324a290-69ef-4742-825f-5f718bad4d2d'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-05 18:57:17.183>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<84>)]
18:57:17,185 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@21337f7b"
18:57:17,185 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "84"
18:57:17,185 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="84") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,185 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,185 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="84") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,185 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5505ae1a]]
18:57:17,185 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,187 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3b7d3a38 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@416c58f5, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,188 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,188 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") was evicted from transactional cache
18:57:17,188 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
18:57:17,188 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,188 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,188 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,188 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,188 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@512baff6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1"
18:57:17,188 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,189 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:57:17,189 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,189 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,189 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,189 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,189 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,189 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,189 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,190 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@14fc1f0 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4ae9cfc1, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,190 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:57:17,190 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-5, enlisted resources=[]]
18:57:17,190 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,190 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575"
18:57:17,191 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=85
18:57:17,191 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,191 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="85") enlisted in transactional cache
18:57:17,191 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" being inserted into table "`DOMAIN_EVENT`"
18:57:17,191 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,191 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-5, enlisted resources=[]]
18:57:17,191 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572"
18:57:17,191 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,191 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,192 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,192 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'88b388ba-990c-467d-bfa4-a978a6173dd7'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-05 18:57:17.19>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<85>)]
18:57:17,192 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@60856961"
18:57:17,192 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "85"
18:57:17,192 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="85") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,192 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,192 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="85") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,192 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5ddf0d24]]
18:57:17,193 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,195 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@130e116b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@e383572, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,195 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,195 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") was evicted from transactional cache
18:57:17,195 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
18:57:17,196 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,196 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,196 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,196 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,197 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@c9d0d6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30"
18:57:17,197 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,197 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,197 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,197 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,197 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,197 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,198 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,198 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,198 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,198 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,198 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@66c61024 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61fe30, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,198 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:57:17,200 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-6, enlisted resources=[]]
18:57:17,200 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,200 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819"
18:57:17,200 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=86
18:57:17,200 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,200 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="86") enlisted in transactional cache
18:57:17,200 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" being inserted into table "`DOMAIN_EVENT`"
18:57:17,200 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,200 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-6, enlisted resources=[]]
18:57:17,201 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6"
18:57:17,201 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,201 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,201 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,201 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'c13f1121-ba61-4bce-ab9a-ea87ad0bc3fe'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-05 18:57:17.2>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<86>)]
18:57:17,202 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5d066c7d"
18:57:17,202 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,202 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,202 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,202 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,202 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "86"
18:57:17,202 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,202 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="86") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,203 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,203 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,203 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,203 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="86") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,203 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@4b41dd5c]]
18:57:17,203 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,211 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@a3d9978 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@61544ae6, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,211 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,211 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") was evicted from transactional cache
18:57:17,211 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 10 ms
18:57:17,212 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,212 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,212 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,212 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,212 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@38089a5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a"
18:57:17,213 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,213 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
18:57:17,213 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,213 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,213 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,214 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,215 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@9ebe38b [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4b23c30a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,215 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
18:57:17,217 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-1868172550-7, enlisted resources=[]]
18:57:17,217 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3 (optimistic=false)
18:57:17,217 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61"
18:57:17,217 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=87
18:57:17,217 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,217 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="87") enlisted in transactional cache
18:57:17,217 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" being inserted into table "`DOMAIN_EVENT`"
18:57:17,218 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
18:57:17,218 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-1868172550-7, enlisted resources=[]]
18:57:17,218 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59"
18:57:17,218 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
18:57:17,219 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") is having the value in field "timeStamp" replaced by a SCO wrapper
18:57:17,219 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
18:57:17,219 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>,<'df2c96eb-0ae3-4c36-ae2d-6e4c09446ed9'>,<'{"cartId":"d499bc6f-0d7b-4b34-9a8e-9568264fb943","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-05 18:57:17.217>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<87>)]
18:57:17,220 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6ce86ce1"
18:57:17,220 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@1139b2f3
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "87"
18:57:17,220 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="87") lifecycle state "P_NEW" added to the list of reachables on commit.
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
18:57:17,220 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
18:57:17,220 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="87") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
18:57:17,220 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-1868172550-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@673be18f]]
18:57:17,220 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,223 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5bf0fe62 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1e097d59, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
18:57:17,223 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") has a lifecycle change : "P_NEW"->"HOLLOW"
18:57:17,223 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") was evicted from transactional cache
18:57:17,223 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
18:57:17,224 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
18:57:17,224 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
18:57:17,224 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
18:57:17,224 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
18:57:17,224 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@764faa6: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832"
18:57:17,224 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'d499bc6f-0d7b-4b34-9a8e-9568264fb943'>
18:57:17,225 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
18:57:17,225 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
18:57:17,225 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,225 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@2b175c00" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:81") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@12359a82" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:82") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@558bdf1f" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:83") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@291a7e3c" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:84") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1800a575" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:85") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7b420819" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:86") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
18:57:17,225 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
18:57:17,225 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@32c4e8b2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@64bce832, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
18:57:17,228 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@3cdf2c61" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:87") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:23:49,748 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
12:23:49,779 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
12:23:49,807 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:23:49,828 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:23:49,832 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
12:23:49,862 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:23:49,864 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:23:49,867 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
12:23:49,875 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:23:49,881 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:23:49,952 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:23:49,961 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:23:50,015 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
12:23:50,098 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
12:23:50,098 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
12:23:50,136 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
12:23:50,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
12:23:50,136 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
12:23:50,137 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
12:23:50,143 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
12:23:50,144 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
12:23:50,145 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
12:23:50,146 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
12:23:50,147 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
12:23:50,147 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
12:23:50,147 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
12:23:50,147 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
12:23:50,148 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
12:23:50,210 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
12:23:50,240 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
12:23:50,241 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
12:23:50,241 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
12:23:50,242 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
12:23:50,242 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
12:23:50,243 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
12:23:50,243 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
12:23:50,243 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
12:23:50,244 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
12:23:50,244 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
12:23:50,244 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
12:23:50,245 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
12:23:50,245 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
12:23:50,245 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
12:23:50,245 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
12:23:50,245 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
12:23:50,245 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
12:23:50,247 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,247 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,248 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,248 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,248 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,248 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,248 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:23:50,250 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
12:23:50,251 (main) ERROR [DataNucleus.MetaData] - Found Meta-Data for class com.metamagic.droit.eventsourcing.model.DomainEvent but this class is either not enhanced or you have multiple copies of the persistence API jar in your CLASSPATH!! Make sure all persistable classes are enhanced before running DataNucleus and/or the CLASSPATH is correct.
org.datanucleus.exceptions.NucleusUserException: Found Meta-Data for class com.metamagic.droit.eventsourcing.model.DomainEvent but this class is either not enhanced or you have multiple copies of the persistence API jar in your CLASSPATH!! Make sure all persistable classes are enhanced before running DataNucleus and/or the CLASSPATH is correct.
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseClassMetaData(MetaDataManagerImpl.java:2749)
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseFileMetaData(MetaDataManagerImpl.java:2684)
	at org.datanucleus.metadata.MetaDataManagerImpl.initialiseFileMetaDataForUse(MetaDataManagerImpl.java:1367)
	at org.datanucleus.metadata.MetaDataManagerImpl.loadPersistenceUnit(MetaDataManagerImpl.java:1130)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.initialiseMetaData(JDOPersistenceManagerFactory.java:797)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:600)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:316)
	at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:225)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at javax.jdo.JDOHelper$16.run(JDOHelper.java:1975)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.jdo.JDOHelper.invoke(JDOHelper.java:1970)
	at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1177)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:851)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1109)
	at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:924)
	at com.metamagic.desire.examples.PMFConfig.<clinit>(PMFConfig.java:15)
	at com.metamagic.desire.examples.TestClass.<init>(TestClass.java:27)
	at com.metamagic.desire.examples.TestClass.main(TestClass.java:94)

12:32:58,498 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
12:32:58,514 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
12:32:58,524 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:32:58,529 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:32:58,531 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
12:32:58,538 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:32:58,541 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:32:58,543 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
12:32:58,548 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:32:58,550 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:32:58,573 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:32:58,578 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:32:58,591 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
12:32:58,625 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
12:32:58,625 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
12:32:58,643 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
12:32:58,644 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
12:32:58,645 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
12:32:58,646 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
12:32:58,647 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
12:32:58,647 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
12:32:58,647 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
12:32:58,673 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
12:32:58,684 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
12:32:58,685 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
12:32:58,685 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
12:32:58,685 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
12:32:58,685 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
12:32:58,686 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
12:32:58,686 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
12:32:58,686 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
12:32:58,686 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
12:32:58,686 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
12:32:58,687 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,688 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,688 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,688 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,688 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,688 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,688 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:32:58,689 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
12:32:58,689 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
12:32:58,690 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
12:32:58,691 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
12:32:58,765 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
12:32:58,765 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
12:32:58,765 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
12:32:58,774 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
12:32:58,964 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
12:32:58,997 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
12:32:58,997 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
12:32:58,997 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
12:32:58,997 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
12:32:58,998 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
12:32:59,001 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
12:32:59,026 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507273379012`.`UNUSED`" added to internal representation of table.
12:32:59,029 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507273379012`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
12:32:59,051 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 22 ms
12:32:59,062 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
12:32:59,063 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507273379012` CASCADE
12:32:59,071 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 8 ms
12:32:59,072 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
12:32:59,072 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
12:32:59,072 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
12:32:59,073 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
12:32:59,074 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
12:32:59,075 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,075 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
12:32:59,077 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
12:32:59,081 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
12:32:59,081 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
12:32:59,082 (main) DEBUG [DataNucleus.Persistence] - ================================================
12:32:59,099 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
12:32:59,367 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
12:32:59,380 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 12 ms
12:32:59,380 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
12:32:59,380 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
12:32:59,392 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
12:32:59,392 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
12:32:59,393 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
12:32:59,394 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
12:32:59,395 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,396 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,397 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:32:59,398 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
12:32:59,399 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
12:32:59,399 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179" with isolation "serializable"
12:32:59,400 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
12:32:59,401 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
12:32:59,412 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 11 ms
12:32:59,413 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
12:32:59,418 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
12:32:59,423 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
12:32:59,426 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
12:32:59,427 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
12:32:59,427 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
12:32:59,427 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,427 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,457 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
12:32:59,467 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 86 ms
12:32:59,468 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,468 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,479 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@14f232c4: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551"
12:32:59,481 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,481 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:32:59,483 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 15 ms
12:32:59,483 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,484 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,520 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-1, enlisted resources=[]]
12:32:59,521 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,521 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc"
12:32:59,530 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
12:32:59,530 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:32:59,530 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
12:32:59,530 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,531 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
12:32:59,531 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@10f7f7de: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
12:32:59,531 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
12:32:59,532 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:32:59,532 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
12:32:59,532 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
12:32:59,532 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
12:32:59,532 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
12:32:59,532 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6bf08014"
12:32:59,532 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
12:32:59,533 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,535 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,536 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=11
12:32:59,537 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,537 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="11") enlisted in transactional cache
12:32:59,541 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" being inserted into table "`DOMAIN_EVENT`"
12:32:59,545 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,545 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-1, enlisted resources=[]]
12:32:59,546 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828"
12:32:59,546 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,549 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,549 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,550 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'5fb0d9fc-d2af-4379-a273-37a16ad6394a'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","custId":"5608a1f4-e0b3-441c-8301-ae63f7df61be"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-06 12:32:59.519>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<11>)]
12:32:59,550 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0"
12:32:59,550 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,551 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,551 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,552 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,552 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "11"
12:32:59,552 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,552 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="11") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,553 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,553 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,553 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,554 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="11") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,555 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8]]
12:32:59,555 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,557 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,558 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,558 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") was evicted from transactional cache
12:32:59,558 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 9 ms
12:32:59,559 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,559 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,559 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,560 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,560 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@74a6f9c1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb"
12:32:59,561 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,561 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:32:59,561 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
12:32:59,561 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,561 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,562 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,563 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,564 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:32:59,580 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-2, enlisted resources=[]]
12:32:59,580 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,580 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6"
12:32:59,580 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=12
12:32:59,581 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,581 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="12") enlisted in transactional cache
12:32:59,581 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" being inserted into table "`DOMAIN_EVENT`"
12:32:59,581 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,581 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-2, enlisted resources=[]]
12:32:59,581 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517"
12:32:59,581 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,582 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,582 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,582 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'99caf95f-95b5-4094-a974-86ed11750707'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-06 12:32:59.58>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<12>)]
12:32:59,582 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4"
12:32:59,582 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,582 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,582 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,582 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,582 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "12"
12:32:59,583 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,583 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="12") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,583 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,583 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,583 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,583 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="12") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,583 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03]]
12:32:59,583 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,585 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,585 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,585 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") was evicted from transactional cache
12:32:59,585 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
12:32:59,585 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,586 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,586 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,586 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,586 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@56673b2c: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013"
12:32:59,586 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,587 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:32:59,587 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:32:59,587 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,587 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,587 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,587 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,587 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,588 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:32:59,593 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-3, enlisted resources=[]]
12:32:59,593 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,593 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54"
12:32:59,593 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=13
12:32:59,593 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,594 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="13") enlisted in transactional cache
12:32:59,594 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" being inserted into table "`DOMAIN_EVENT`"
12:32:59,594 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,594 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-3, enlisted resources=[]]
12:32:59,594 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722"
12:32:59,594 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,594 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,595 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,595 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'4d21d0a8-7e57-48f3-aebb-fafd53afb8fa'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-06 12:32:59.593>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<13>)]
12:32:59,595 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6"
12:32:59,595 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "13"
12:32:59,595 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="13") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,595 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,596 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,596 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="13") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,596 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23]]
12:32:59,596 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,598 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,598 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,598 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") was evicted from transactional cache
12:32:59,598 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
12:32:59,598 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,598 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,599 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,599 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,599 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@7efaad5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4"
12:32:59,599 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,599 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:32:59,600 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:32:59,600 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,600 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,600 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,600 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,600 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,600 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,601 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:32:59,601 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-4, enlisted resources=[]]
12:32:59,601 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,601 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517"
12:32:59,601 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=14
12:32:59,601 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,601 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="14") enlisted in transactional cache
12:32:59,601 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" being inserted into table "`DOMAIN_EVENT`"
12:32:59,602 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,602 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-4, enlisted resources=[]]
12:32:59,602 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0"
12:32:59,602 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,602 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,602 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,602 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'f838df49-d224-4a39-9821-0fb221b2fce7'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-06 12:32:59.601>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<14>)]
12:32:59,603 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b"
12:32:59,603 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "14"
12:32:59,603 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="14") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,603 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,603 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="14") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,603 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b]]
12:32:59,603 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,606 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,607 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,607 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") was evicted from transactional cache
12:32:59,607 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
12:32:59,607 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,607 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,607 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,607 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,608 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1c93f6e1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35"
12:32:59,608 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,608 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:32:59,608 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:32:59,608 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,608 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,608 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,608 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,608 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,609 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,609 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,609 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:32:59,609 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-5, enlisted resources=[]]
12:32:59,609 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,610 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961"
12:32:59,610 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=15
12:32:59,610 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,610 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="15") enlisted in transactional cache
12:32:59,610 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" being inserted into table "`DOMAIN_EVENT`"
12:32:59,610 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,610 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-5, enlisted resources=[]]
12:32:59,610 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f"
12:32:59,610 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,611 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,611 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,611 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'165cebd0-b5a7-4ff8-ac75-bbb1c4d326a6'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-06 12:32:59.609>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<15>)]
12:32:59,611 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54"
12:32:59,611 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,611 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,611 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,611 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,611 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "15"
12:32:59,611 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,612 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="15") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,612 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,612 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,612 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,612 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="15") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,612 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961]]
12:32:59,612 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,614 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,614 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,614 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") was evicted from transactional cache
12:32:59,614 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
12:32:59,615 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,615 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,615 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,615 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,616 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@3adcc812: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f"
12:32:59,616 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,616 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:32:59,616 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:32:59,616 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,616 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,616 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,616 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,616 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,617 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,617 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,617 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,617 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:32:59,618 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-6, enlisted resources=[]]
12:32:59,618 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,618 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad"
12:32:59,618 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=16
12:32:59,618 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,618 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="16") enlisted in transactional cache
12:32:59,618 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" being inserted into table "`DOMAIN_EVENT`"
12:32:59,619 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,619 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-6, enlisted resources=[]]
12:32:59,619 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e"
12:32:59,619 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,619 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,619 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,620 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'43d7d9e5-eb54-4000-ae5f-b7d941e6742b'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-06 12:32:59.618>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<16>)]
12:32:59,620 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8"
12:32:59,620 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,620 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,620 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,620 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,620 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "16"
12:32:59,621 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,621 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="16") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,621 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,621 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,621 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,621 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="16") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,621 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d]]
12:32:59,621 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,623 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,624 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,624 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") was evicted from transactional cache
12:32:59,624 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
12:32:59,624 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,625 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,625 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,625 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,625 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@66c92293: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be"
12:32:59,625 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,626 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:32:59,626 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:32:59,626 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,626 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,626 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,627 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,627 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,627 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,627 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,627 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,627 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,628 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:32:59,629 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=-43248313-7, enlisted resources=[]]
12:32:59,629 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:32:59,629 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b"
12:32:59,629 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=17
12:32:59,629 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,629 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="17") enlisted in transactional cache
12:32:59,629 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" being inserted into table "`DOMAIN_EVENT`"
12:32:59,630 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:32:59,630 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=-43248313-7, enlisted resources=[]]
12:32:59,630 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a"
12:32:59,630 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:32:59,631 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") is having the value in field "timeStamp" replaced by a SCO wrapper
12:32:59,631 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:32:59,631 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>,<'f0836f55-439d-4cd6-946b-3558a4f59dd5'>,<'{"cartId":"88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-06 12:32:59.629>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<17>)]
12:32:59,631 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870"
12:32:59,631 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:32:59,631 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "17"
12:32:59,632 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="17") lifecycle state "P_NEW" added to the list of reachables on commit.
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:32:59,632 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:32:59,632 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="17") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:32:59,632 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=-43248313-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36]]
12:32:59,632 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,634 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:32:59,634 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") has a lifecycle change : "P_NEW"->"HOLLOW"
12:32:59,634 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") was evicted from transactional cache
12:32:59,634 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
12:32:59,634 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:32:59,634 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:32:59,635 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:32:59,635 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:32:59,635 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@598bd2ba: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3"
12:32:59,635 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'88aa90f2-6a4e-4f2e-922f-2549eb6ec8eb'>
12:32:59,635 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:32:59,635 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:32:59,635 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,636 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:11") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:12") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:13") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:14") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:15") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:16") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:32:59,636 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:32:59,636 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:32:59,640 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:17") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:20,659 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
12:34:20,674 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
12:34:20,682 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:34:20,687 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:34:20,689 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
12:34:20,696 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:34:20,699 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:34:20,702 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
12:34:20,706 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:34:20,708 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:34:20,726 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:34:20,733 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:34:20,745 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
12:34:20,778 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
12:34:20,778 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
12:34:20,797 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
12:34:20,798 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
12:34:20,799 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
12:34:20,800 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
12:34:20,800 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
12:34:20,827 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
12:34:20,839 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
12:34:20,840 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
12:34:20,840 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
12:34:20,840 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
12:34:20,840 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
12:34:20,841 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
12:34:20,841 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
12:34:20,841 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
12:34:20,841 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
12:34:20,841 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
12:34:20,841 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,842 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,843 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,843 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:34:20,844 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
12:34:20,844 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
12:34:20,845 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
12:34:20,846 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
12:34:20,921 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
12:34:20,921 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
12:34:20,921 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
12:34:20,929 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
12:34:21,121 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
12:34:21,153 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
12:34:21,153 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
12:34:21,153 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
12:34:21,153 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
12:34:21,153 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
12:34:21,154 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
12:34:21,180 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507273461166`.`UNUSED`" added to internal representation of table.
12:34:21,183 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507273461166`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
12:34:21,202 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 18 ms
12:34:21,214 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
12:34:21,214 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507273461166` CASCADE
12:34:21,223 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 9 ms
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
12:34:21,224 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
12:34:21,225 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
12:34:21,225 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
12:34:21,225 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
12:34:21,225 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,226 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
12:34:21,228 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
12:34:21,232 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
12:34:21,232 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
12:34:21,232 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
12:34:21,233 (main) DEBUG [DataNucleus.Persistence] - ================================================
12:34:21,249 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
12:34:21,531 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
12:34:21,547 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 16 ms
12:34:21,547 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
12:34:21,549 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
12:34:21,567 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
12:34:21,567 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
12:34:21,568 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
12:34:21,571 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
12:34:21,571 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
12:34:21,573 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,574 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:34:21,574 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
12:34:21,574 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,575 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:34:21,576 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
12:34:21,576 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
12:34:21,577 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
12:34:21,577 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
12:34:21,577 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
12:34:21,578 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,578 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:34:21,578 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
12:34:21,581 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
12:34:21,581 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179" with isolation "serializable"
12:34:21,584 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
12:34:21,586 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
12:34:21,599 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 13 ms
12:34:21,599 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
12:34:21,605 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
12:34:21,608 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
12:34:21,610 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
12:34:21,611 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
12:34:21,611 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
12:34:21,611 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,614 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,636 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
12:34:21,644 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 94 ms
12:34:21,644 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,645 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,652 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@14f232c4: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551"
12:34:21,654 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,654 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:34:21,656 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 12 ms
12:34:21,657 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,657 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,690 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-1, enlisted resources=[]]
12:34:21,690 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,690 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc"
12:34:21,699 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
12:34:21,699 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:34:21,699 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
12:34:21,700 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,700 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
12:34:21,701 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@10f7f7de: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
12:34:21,701 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
12:34:21,701 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:34:21,701 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
12:34:21,701 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
12:34:21,702 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 1 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
12:34:21,702 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
12:34:21,702 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6bf08014"
12:34:21,702 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
12:34:21,703 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,707 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,707 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=21
12:34:21,709 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,709 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="21") enlisted in transactional cache
12:34:21,713 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" being inserted into table "`DOMAIN_EVENT`"
12:34:21,716 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,717 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-1, enlisted resources=[]]
12:34:21,717 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828"
12:34:21,717 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,720 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,721 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,722 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'cd089669-0915-47d3-94fb-1d3cc48d76f2'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","custId":"5aad6afa-e00a-4304-bc6a-bee9d63d9c96"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-06 12:34:21.689>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<21>)]
12:34:21,723 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0"
12:34:21,723 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,724 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,724 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,724 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,724 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "21"
12:34:21,724 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,725 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="21") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,725 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,725 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,725 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,726 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="21") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,726 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8]]
12:34:21,726 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,729 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,729 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,730 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") was evicted from transactional cache
12:34:21,730 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 8 ms
12:34:21,730 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,730 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,731 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,731 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,732 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@74a6f9c1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb"
12:34:21,732 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,732 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:34:21,732 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,732 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,732 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,734 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,734 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,735 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:21,752 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-2, enlisted resources=[]]
12:34:21,752 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,752 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6"
12:34:21,752 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=22
12:34:21,752 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,752 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="22") enlisted in transactional cache
12:34:21,752 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" being inserted into table "`DOMAIN_EVENT`"
12:34:21,753 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,753 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-2, enlisted resources=[]]
12:34:21,753 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517"
12:34:21,753 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,754 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,754 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,754 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'4adb727c-1599-42a0-af4f-e253531b877c'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","shopItem":{"itemId":"I1","name":"Item1","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-06 12:34:21.752>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<22>)]
12:34:21,755 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4"
12:34:21,755 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "22"
12:34:21,755 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="22") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,755 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,755 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="22") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,755 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03]]
12:34:21,755 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,758 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,758 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,758 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") was evicted from transactional cache
12:34:21,758 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:34:21,758 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,758 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,758 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,759 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,759 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@56673b2c: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013"
12:34:21,759 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,759 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:34:21,759 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,759 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,759 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,760 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,760 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,760 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,760 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:21,765 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-3, enlisted resources=[]]
12:34:21,765 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,765 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54"
12:34:21,765 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=23
12:34:21,765 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,765 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="23") enlisted in transactional cache
12:34:21,765 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" being inserted into table "`DOMAIN_EVENT`"
12:34:21,766 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,766 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-3, enlisted resources=[]]
12:34:21,766 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722"
12:34:21,766 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,766 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,766 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,766 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'7d3719a7-1c12-46c8-8db2-6ac9bf129702'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","shopItem":{"itemId":"I2","name":"Item2","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-06 12:34:21.765>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<23>)]
12:34:21,767 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6"
12:34:21,767 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "23"
12:34:21,767 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="23") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,767 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,767 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="23") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,767 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23]]
12:34:21,767 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,770 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,771 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,771 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") was evicted from transactional cache
12:34:21,771 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
12:34:21,771 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,771 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,771 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,772 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,772 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@7efaad5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4"
12:34:21,772 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,772 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:34:21,772 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,773 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,773 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,773 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,773 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,773 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,773 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,773 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:21,774 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-4, enlisted resources=[]]
12:34:21,774 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,774 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517"
12:34:21,774 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=24
12:34:21,774 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,774 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="24") enlisted in transactional cache
12:34:21,774 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" being inserted into table "`DOMAIN_EVENT`"
12:34:21,775 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,775 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-4, enlisted resources=[]]
12:34:21,775 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0"
12:34:21,775 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,775 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,775 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,775 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'044f3563-add3-45c4-9117-399e1deeb57c'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","shopItem":{"itemId":"I3","name":"Item3","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-06 12:34:21.774>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<24>)]
12:34:21,776 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b"
12:34:21,776 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "24"
12:34:21,776 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="24") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,776 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,776 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="24") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,776 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b]]
12:34:21,776 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,778 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,779 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,779 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") was evicted from transactional cache
12:34:21,779 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:34:21,779 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,779 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,779 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,779 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,779 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1c93f6e1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35"
12:34:21,780 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,780 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:34:21,780 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,780 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,780 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,780 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,780 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,780 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,781 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,781 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,781 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:21,781 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-5, enlisted resources=[]]
12:34:21,781 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,782 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961"
12:34:21,782 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=25
12:34:21,782 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,782 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="25") enlisted in transactional cache
12:34:21,782 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" being inserted into table "`DOMAIN_EVENT`"
12:34:21,782 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,782 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-5, enlisted resources=[]]
12:34:21,782 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f"
12:34:21,782 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,783 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,783 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,783 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'ccb80543-ebdb-48db-8132-5302c1bdd79f'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","shopItem":{"itemId":"I4","name":"Item4","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-06 12:34:21.781>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<25>)]
12:34:21,783 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54"
12:34:21,783 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "25"
12:34:21,784 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="25") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,784 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,784 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="25") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,784 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961]]
12:34:21,784 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,786 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,788 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,788 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") was evicted from transactional cache
12:34:21,788 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
12:34:21,788 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,789 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,789 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,789 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,789 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@3adcc812: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f"
12:34:21,789 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,790 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:34:21,790 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,790 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,790 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,790 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,790 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,790 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,791 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,791 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,791 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,791 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:21,792 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-6, enlisted resources=[]]
12:34:21,793 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,793 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad"
12:34:21,793 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=26
12:34:21,793 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,793 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="26") enlisted in transactional cache
12:34:21,793 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" being inserted into table "`DOMAIN_EVENT`"
12:34:21,793 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,793 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-6, enlisted resources=[]]
12:34:21,794 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e"
12:34:21,794 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,794 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,794 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,794 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'dbb58139-ae40-45e7-ba65-77b68d4a83e5'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-06 12:34:21.792>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<26>)]
12:34:21,795 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8"
12:34:21,795 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "26"
12:34:21,795 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="26") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,795 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,795 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="26") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,795 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d]]
12:34:21,795 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,797 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,798 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,798 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") was evicted from transactional cache
12:34:21,798 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:34:21,799 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,799 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,799 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,799 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,799 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@66c92293: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be"
12:34:21,799 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,800 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:34:21,800 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,800 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,800 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,801 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,801 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,801 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,801 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,801 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,801 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,802 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,802 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:34:21,804 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=1810272458-7, enlisted resources=[]]
12:34:21,804 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:34:21,804 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b"
12:34:21,804 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=27
12:34:21,804 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,804 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="27") enlisted in transactional cache
12:34:21,804 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" being inserted into table "`DOMAIN_EVENT`"
12:34:21,805 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:34:21,805 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=1810272458-7, enlisted resources=[]]
12:34:21,806 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a"
12:34:21,806 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:34:21,806 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") is having the value in field "timeStamp" replaced by a SCO wrapper
12:34:21,806 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:34:21,806 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'92f98ae8-6b0e-455f-8697-71f53f587c8b'>,<'b7b39d31-4953-481f-b354-e6e6ea627978'>,<'{"cartId":"92f98ae8-6b0e-455f-8697-71f53f587c8b","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-06 12:34:21.804>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<27>)]
12:34:21,807 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870"
12:34:21,807 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "27"
12:34:21,807 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="27") lifecycle state "P_NEW" added to the list of reachables on commit.
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:34:21,807 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:34:21,807 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="27") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:34:21,807 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=1810272458-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36]]
12:34:21,807 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,810 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:34:21,810 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") has a lifecycle change : "P_NEW"->"HOLLOW"
12:34:21,810 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") was evicted from transactional cache
12:34:21,810 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:34:21,810 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:34:21,810 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:34:21,810 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:34:21,811 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:34:21,811 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@598bd2ba: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3"
12:34:21,811 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'92f98ae8-6b0e-455f-8697-71f53f587c8b'>
12:34:21,811 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:34:21,811 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:34:21,811 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,812 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:21") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:22") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:23") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:24") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:25") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:26") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:34:21,812 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:34:21,813 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:34:21,816 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:27") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:08,411 (main) DEBUG [DataNucleus.General] - Using PluginRegistry org.datanucleus.plugin.NonManagedPluginRegistry
12:36:08,438 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar.
12:36:08,457 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:36:08,464 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-core/5.1.2/datanucleus-core-5.1.2.jar!/plugin.xml.
12:36:08,467 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.api.jdo version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar.
12:36:08,478 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:36:08,481 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-api-jdo/5.1.2/datanucleus-api-jdo-5.1.2.jar!/plugin.xml.
12:36:08,485 (main) DEBUG [DataNucleus.General] - Registering bundle org.datanucleus.store.rdbms version 5.1.2 at URL file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar.
12:36:08,496 (main) DEBUG [DataNucleus.General] - Loading extension points from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:36:08,500 (main) DEBUG [DataNucleus.General] - Loading extensions from plug-in file jar:file:/home/mahesh/.m2/repository/org/datanucleus/datanucleus-rdbms/5.1.2/datanucleus-rdbms-5.1.2.jar!/plugin.xml.
12:36:08,520 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/Softwares/JdoWS/onlinestore/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:36:08,527 (main) DEBUG [DataNucleus.MetaData] - Parsing MetaData file "file:/home/mahesh/git/Droit/droit-core-api/target/classes/META-INF/persistence.xml" using handler "persistence" (validation="false")
12:36:08,546 (main) DEBUG [DataNucleus.Persistence] - Java types support initialising ...
12:36:08,632 (main) DEBUG [DataNucleus.Persistence] - Java types support loaded : supported java types=[B, [C, [D, [F, [I, [J, [Ljava.lang.Boolean;, [Ljava.lang.Byte;, [Ljava.lang.Character;, [Ljava.lang.Double;, [Ljava.lang.Enum;, [Ljava.lang.Float;, [Ljava.lang.Integer;, [Ljava.lang.Long;, [Ljava.lang.Number;, [Ljava.lang.Object;, [Ljava.lang.Short;, [Ljava.lang.String;, [Ljava.math.BigDecimal;, [Ljava.math.BigInteger;, [Ljava.util.Date;, [Ljava.util.Locale;, [S, [Z, boolean, byte, char, double, float, int, java.awt.Color, java.awt.image.BufferedImage, java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.Class, java.lang.Double, java.lang.Enum, java.lang.Float, java.lang.Integer, java.lang.Long, java.lang.Number, java.lang.Short, java.lang.String, java.lang.StringBuffer, java.lang.StringBuilder, java.math.BigDecimal, java.math.BigInteger, java.net.URI, java.net.URL, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.time.Duration, java.time.Instant, java.time.LocalDate, java.time.LocalDateTime, java.time.LocalTime, java.time.MonthDay, java.time.OffsetDateTime, java.time.OffsetTime, java.time.Period, java.time.Year, java.time.YearMonth, java.time.ZonedDateTime, java.time.ZoneId, java.time.ZoneOffset, java.util.ArrayList, java.util.Arrays$ArrayList, java.util.BitSet, java.util.Calendar, java.util.Collection, java.util.Currency, java.util.Date, java.util.GregorianCalendar, java.util.HashMap, java.util.HashSet, java.util.Hashtable, java.util.LinkedHashMap, java.util.LinkedHashSet, java.util.LinkedList, java.util.List, java.util.Locale, java.util.Map, java.util.Optional, java.util.PriorityQueue, java.util.Properties, java.util.Queue, java.util.Set, java.util.SortedMap, java.util.SortedSet, java.util.Stack, java.util.TimeZone, java.util.TreeMap, java.util.TreeSet, java.util.UUID, java.util.Vector, long, short
12:36:08,632 (main) DEBUG [DataNucleus.Persistence] - Type converter support initialising ...
12:36:08,675 (main) DEBUG [DataNucleus.Persistence] - Type converter support loaded
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for byte[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for char[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for double[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for float[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for int[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for long[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigDecimal; to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for [Ljava.math.BigInteger; to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for short[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for boolean[] to : java.nio.ByteBuffer
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.Color to : java.lang.String,int[]
12:36:08,676 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.awt.image.BufferedImage to : java.nio.ByteBuffer,byte[]
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.io.Serializable to : java.nio.ByteBuffer,java.lang.String,byte[]
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Boolean to : java.lang.Integer,java.lang.Character
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Character to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Class to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Integer to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.Long to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuffer to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.lang.StringBuilder to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigDecimal to : java.lang.Double,java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.math.BigInteger to : java.lang.String,java.lang.Long
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URI to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.net.URL to : java.lang.String
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Date to : java.util.Date,java.lang.String,java.lang.Long
12:36:08,677 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Time to : java.util.Date,java.lang.String,java.lang.Long
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.sql.Timestamp to : java.util.Date,java.lang.String,java.lang.Long
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Duration to : java.lang.Double,java.lang.String,java.lang.Long
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Instant to : java.util.Date,java.sql.Timestamp,java.lang.String,java.lang.Long
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDate to : java.util.Date,java.lang.String,java.sql.Date
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.LocalTime to : java.util.Date,java.lang.String,java.sql.Time,java.lang.Long
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.MonthDay to : java.util.Date,java.lang.String,int[],java.sql.Date
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetDateTime to : java.util.Date,java.sql.Timestamp,java.lang.String
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.OffsetTime to : java.lang.String,java.sql.Time,java.lang.Long
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Period to : java.lang.String,int[]
12:36:08,678 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.Year to : java.lang.Integer,java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.YearMonth to : java.util.Date,java.lang.String,int[],java.sql.Date
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZonedDateTime to : java.sql.Timestamp,java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneId to : java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.time.ZoneOffset to : java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.BitSet to : java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Calendar to : java.util.Date,java.sql.Timestamp,java.lang.String,[Ljava.lang.Object;
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Currency to : java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Date to : java.lang.String,java.lang.Long
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.Locale to : java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.TimeZone to : java.lang.String
12:36:08,679 (main) DEBUG [DataNucleus.Persistence] - TypeConverter(s) available for java.util.UUID to : java.lang.String
12:36:08,680 (main) DEBUG [DataNucleus.MetaData] - MetaDataManager : Input=(XML,Annotations), XML-Validation=false, XML-Suffices=(persistence=*.jdo, orm=orm, query=*.jdoquery), JDO-listener=false
12:36:08,680 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Loading Metadata for persistence-unit "PersistenceUnit" ...
12:36:08,718 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" has been specified with JDO annotations so using those.
12:36:08,741 (main) DEBUG [DataNucleus.MetaData] - Populating all MetaData ...
12:36:08,741 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Populating Meta-Data
12:36:08,742 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /META-INF/package.orm
12:36:08,742 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /WEB-INF/package.orm
12:36:08,742 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /package.orm
12:36:08,743 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/package.orm
12:36:08,743 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com.orm
12:36:08,743 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/package.orm
12:36:08,744 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic.orm
12:36:08,744 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/package.orm
12:36:08,744 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit.orm
12:36:08,744 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/package.orm
12:36:08,744 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing.orm
12:36:08,744 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/package.orm
12:36:08,745 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model.orm
12:36:08,745 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" NOT found at /com/metamagic/droit/eventsourcing/model/DomainEvent.orm
12:36:08,745 (main) DEBUG [DataNucleus.MetaData] - MetaData of type "orm" for class "com.metamagic.droit.eventsourcing.model.DomainEvent" not found
12:36:08,745 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoad" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,745 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadRevision" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,746 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "payLoadType" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,746 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "timeStamp" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,746 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "aggregateIdentifier" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,746 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "sequenceNumber" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,746 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" field "type" : Adding Meta-Data for member since it didnt appear in the Meta-Data definition.
12:36:08,748 (main) DEBUG [DataNucleus.MetaData] - Initialising all MetaData ...
12:36:08,749 (main) DEBUG [DataNucleus.MetaData] - Class "com.metamagic.droit.eventsourcing.model.DomainEvent" : Initialising Meta-Data
12:36:08,750 (main) DEBUG [DataNucleus.MetaData] - MetaData Management : Load of Metadata complete
12:36:08,752 (main) DEBUG [DataNucleus.Datastore] - Creating StoreManager for datastore
12:36:08,866 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "tx" as data source using pooling type of dbcp2-builtin
12:36:08,866 (main) DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
12:36:08,866 (main) DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
12:36:08,875 (main) DEBUG [DataNucleus.Connection] - Created ConnectionPool "nontx" as data source using pooling type of dbcp2-builtin
12:36:09,179 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=null, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx"
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Float, jdbc-type=REAL
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NVARCHAR
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.String, jdbc-type=NCHAR
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - Removing RDBMS support for Java type java.lang.Boolean, jdbc-type=BOOLEAN
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "[B" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.File" using jdbc-types=[LONGVARBINARY], sql-types=[LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.io.Serializable" using jdbc-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY], sql-types=[BLOB, BINARY, VARBINARY, LONGVARBINARY] with default (jdbc-type=LONGVARBINARY, sql-type=LONGVARBINARY)
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Boolean" using jdbc-types=[SMALLINT, CHAR, BIT, TINYINT], sql-types=[SMALLINT, CHAR, BIT, TINYINT] with default (jdbc-type=BIT, sql-type=BIT)
12:36:09,217 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Byte" using jdbc-types=[SMALLINT, TINYINT], sql-types=[SMALLINT, TINYINT] with default (jdbc-type=TINYINT, sql-type=TINYINT)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Character" using jdbc-types=[CHAR, INTEGER], sql-types=[CHAR, INTEGER] with default (jdbc-type=CHAR, sql-type=CHAR)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Double" using jdbc-types=[DECIMAL, DOUBLE], sql-types=[DECIMAL, DOUBLE] with default (jdbc-type=DOUBLE, sql-type=DOUBLE)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Float" using jdbc-types=[FLOAT, DECIMAL, DOUBLE], sql-types=[FLOAT, DECIMAL, DOUBLE] with default (jdbc-type=FLOAT, sql-type=FLOAT)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Integer" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER] with default (jdbc-type=INTEGER, sql-type=INTEGER)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Long" using jdbc-types=[NUMERIC, SMALLINT, BIGINT, TINYINT, INTEGER], sql-types=[NUMERIC, SMALLINT, BIGINT, INT, TINYINT] with default (jdbc-type=BIGINT, sql-type=BIGINT)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.Short" using jdbc-types=[SMALLINT, TINYINT, INTEGER], sql-types=[SMALLINT, TINYINT, INTEGER] with default (jdbc-type=SMALLINT, sql-type=SMALLINT)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.lang.String" using jdbc-types=[BLOB, LONGVARCHAR, CLOB, VARCHAR, CHAR, BIGINT], sql-types=[BLOB, LONGVARCHAR, CLOB, LONGTEXT, CHAR, BIGINT, TEXT, MEDIUMTEXT, MEDIUMBLOB, VARCHAR, LONGBLOB] with default (jdbc-type=VARCHAR, sql-type=VARCHAR)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigDecimal" using jdbc-types=[NUMERIC, DECIMAL], sql-types=[NUMERIC, DECIMAL] with default (jdbc-type=DECIMAL, sql-type=DECIMAL)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.math.BigInteger" using jdbc-types=[NUMERIC], sql-types=[NUMERIC] with default (jdbc-type=NUMERIC, sql-type=NUMERIC)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, BIGINT] with default (jdbc-type=DATE, sql-type=DATE)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Time" using jdbc-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIME, sql-type=TIME)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.sql.Timestamp" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "java.util.Date" using jdbc-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT], sql-types=[DATE, TIMESTAMP, VARCHAR, CHAR, TIME, BIGINT] with default (jdbc-type=TIMESTAMP, sql-type=TIMESTAMP)
12:36:09,218 (main) DEBUG [DataNucleus.Datastore] - RDBMS support configured for "org.datanucleus.identity.DatastoreId" using jdbc-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER], sql-types=[NUMERIC, VARCHAR, CHAR, BIGINT, INTEGER] with default (jdbc-type=BIGINT, sql-type=BIGINT)
12:36:09,248 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DELETEME1507273569234`.`UNUSED`" added to internal representation of table.
12:36:09,251 (main) DEBUG [DataNucleus.Datastore.Schema] - CREATE TABLE `DELETEME1507273569234`
(
    `UNUSED` INTEGER NOT NULL
) ENGINE=INNODB
12:36:09,270 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 19 ms
12:36:09,282 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Name could not be determined for this datastore
12:36:09,282 (main) DEBUG [DataNucleus.Datastore.Schema] - DROP TABLE `DELETEME1507273569234` CASCADE
12:36:09,292 (main) DEBUG [DataNucleus.Datastore.Schema] - SQL Execution Time = 10 ms
12:36:09,292 (main) DEBUG [DataNucleus.Datastore] - ======================= Datastore =========================
12:36:09,292 (main) DEBUG [DataNucleus.Datastore] - StoreManager : "rdbms" (org.datanucleus.store.rdbms.RDBMSStoreManager)
12:36:09,292 (main) DEBUG [DataNucleus.Datastore] - Datastore : read-write
12:36:09,292 (main) DEBUG [DataNucleus.Datastore] - Schema Control : AutoCreate(Tables,Columns,Constraints), Validate(None)
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Schema : NamingFactory=datanucleus2 identifierCase=null
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Query Languages : JDOQL, JPQL, STOREDPROC, SQL
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Queries : Timeout=0
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Datastore Adapter : org.datanucleus.store.rdbms.adapter.MySQLAdapter
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Datastore : name="MySQL" version="5.7.19-0ubuntu0.17.04.1"
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Datastore Driver : name="MySQL Connector Java" version="mysql-connector-java-5.1.44 ( Revision: b3cda4f864902ffdde495b9df93937c3e20009be )"
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Primary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Secondary Connection Factory : URL[jdbc:mysql://localhost/droit_onlinestore?createDatabaseIfNotExist=true]
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Datastore Identifiers : factory="datanucleus2" case="UPPERCASE" catalog=droit_onlinestore
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Cases : MixedCase "MixedCase" "UPPERCASE" MixedCase-Sensitive "MixedCase-Sensitive" 
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Supported Identifier Lengths (max) : Table=64 Column=64 Constraint=64 Index=64 Delimiter=`
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Support for Identifiers in DDL : catalog=true schema=false
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Datastore : checkTableViewExistence, rdbmsConstraintCreateMode=DataNucleus, initialiseColumnInfo=ALL
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Support Statement Batching : yes (max-batch-size=50)
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Queries : Results direction=forward, type=forward-only, concurrency=read-only
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - Java-Types : string-default-length=255
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - JDBC-Types : VARCHAR, LONGVARCHAR, BINARY, VARBINARY, LONGVARBINARY, BIGINT, TINYINT, BIT, CHAR, NUMERIC, DECIMAL, INTEGER, CLOB, SMALLINT, BLOB, FLOAT, DOUBLE, DATE, TIME, TIMESTAMP
12:36:09,293 (main) DEBUG [DataNucleus.Datastore] - ===========================================================
12:36:09,293 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@35083305 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@65466a6a, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,294 (main) DEBUG [DataNucleus.Datastore] - StoreManager now created
12:36:09,296 (main) DEBUG [DataNucleus.Persistence] - Started pool of ExecutionContext (maxPool=20, reaperThread=false)
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - ================= NucleusContext ===============
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - DataNucleus Context : Version "5.1.2" with JRE "1.8.0_131" on "Linux"
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - Persistence API : JDO
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - Persistence-Unit : PersistenceUnit
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - Plugin Registry : org.datanucleus.plugin.NonManagedPluginRegistry
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - ClassLoading : default
12:36:09,302 (main) DEBUG [DataNucleus.Persistence] - Persistence : pm-singlethreaded, nontransactional-read, nontransactional-write, reachability-at-commit, copy-on-attach, managed-relations(checked), deletion-policy=JDO2, serverTimeZone=Asia/Kolkata
12:36:09,303 (main) DEBUG [DataNucleus.Persistence] - Transactions : type=RESOURCE_LOCAL, mode=datastore, isolation=read-committed
12:36:09,303 (main) DEBUG [DataNucleus.Persistence] - ValueGeneration : txn-isolation=read-committed connection=New
12:36:09,303 (main) DEBUG [DataNucleus.Persistence] - Cache : Level1 (soft), Level2 (soft, mode=UNSPECIFIED), QueryResults (soft), Collections/Maps 
12:36:09,303 (main) DEBUG [DataNucleus.Persistence] - ================================================
12:36:09,322 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext OPENED "org.datanucleus.ExecutionContextImpl@5e82df6a" for datastore "org.datanucleus.store.rdbms.RDBMSStoreManager@22635ba0" with txn="org.datanucleus.TransactionImpl@3f197a46"
12:36:09,675 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (generic) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
12:36:09,687 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (generic) = 12 ms
12:36:09,687 (main) DEBUG [DataNucleus.Query] - QueryCompilation:
  [filter:DyadicExpression{PrimaryExpression{aggregateIdentifier}  =  ParameterExpression{aggregateIdentifier}}]
  [symbols: this type=com.metamagic.droit.eventsourcing.model.DomainEvent, aggregateIdentifier type=java.lang.String]
12:36:09,688 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile (datastore) of "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier"
12:36:09,699 (main) DEBUG [DataNucleus.Persistence] - Managing Persistence of Class : com.metamagic.droit.eventsourcing.model.DomainEvent [Table : `DOMAIN_EVENT`, InheritanceStrategy : new-table]
12:36:09,699 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`GLOBALINDEX`" added to internal representation of table.
12:36:09,700 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex] -> Column(s) [`DOMAIN_EVENT`.`GLOBALINDEX`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
12:36:09,702 (main) DEBUG [DataNucleus.Datastore.Schema] - Table `DOMAIN_EVENT` will manage the persistence of the fields for class com.metamagic.droit.eventsourcing.model.DomainEvent (inheritance strategy="new-table") 
12:36:09,702 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`" added to internal representation of table.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.aggregateIdentifier] -> Column(s) [`DOMAIN_EVENT`.`AGGREGATEIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`EVENTIDENTIFIER`" added to internal representation of table.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.eventIdentifier] -> Column(s) [`DOMAIN_EVENT`.`EVENTIDENTIFIER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOAD`" added to internal representation of table.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoad] -> Column(s) [`DOMAIN_EVENT`.`PAYLOAD`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADREVISION`" added to internal representation of table.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,703 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadRevision] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADREVISION`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`PAYLOADTYPE`" added to internal representation of table.
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.payLoadType] -> Column(s) [`DOMAIN_EVENT`.`PAYLOADTYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`SEQUENCENUMBER`" added to internal representation of table.
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.sequenceNumber] -> Column(s) [`DOMAIN_EVENT`.`SEQUENCENUMBER`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.LongMapping" (org.datanucleus.store.rdbms.mapping.datastore.BigIntRDBMSMapping)
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TIMESTAMP`" added to internal representation of table.
12:36:09,704 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.timeStamp] -> Column(s) [`DOMAIN_EVENT`.`TIMESTAMP`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.SqlTimestampMapping" (org.datanucleus.store.rdbms.mapping.datastore.TimestampRDBMSMapping)
12:36:09,705 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "`DOMAIN_EVENT`.`TYPE`" added to internal representation of table.
12:36:09,705 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,705 (main) DEBUG [DataNucleus.Datastore.Schema] - Field [com.metamagic.droit.eventsourcing.model.DomainEvent.type] -> Column(s) [`DOMAIN_EVENT`.`TYPE`] using mapping of type "org.datanucleus.store.rdbms.mapping.java.StringMapping" (org.datanucleus.store.rdbms.mapping.datastore.VarCharRDBMSMapping)
12:36:09,705 (main) DEBUG [DataNucleus.Datastore.Schema] - Table/View `DOMAIN_EVENT` has been initialised
12:36:09,708 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "serializable" and auto-commit=false
12:36:09,708 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction STARTED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179" with isolation "serializable"
12:36:09,709 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of `DOMAIN_EVENT` returned table type of TABLE
12:36:09,710 (main) DEBUG [DataNucleus.Datastore.Schema] - Loading column info for table(s) "DOMAIN_EVENT" in Catalog "", Schema ""
12:36:09,721 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info loaded for Catalog "", Schema "", 1 tables, time = 11 ms
12:36:09,721 (main) DEBUG [DataNucleus.Datastore.Schema] - Column info retrieved for table "DOMAIN_EVENT" : 9 columns found
12:36:09,726 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 index(es) for table `DOMAIN_EVENT`
12:36:09,729 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 0 foreign key(s) for table `DOMAIN_EVENT`
12:36:09,730 (main) DEBUG [DataNucleus.Datastore.Schema] - Validating 2 unique key(s) for table `DOMAIN_EVENT`
12:36:09,731 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction COMMITTING with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
12:36:09,731 (main) DEBUG [DataNucleus.Datastore.Schema] - Schema Transaction CLOSED with connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179"
12:36:09,731 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,732 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5e7cd6cc [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@68c9d179, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,767 (main) DEBUG [DataNucleus.Query] - Compile of JDOQL into SQL - JoinType : navigation(default=(using nullability), filter=(using nullability))
12:36:09,779 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Compile Time (datastore) = 90 ms
12:36:09,780 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,781 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,789 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@14f232c4: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551"
12:36:09,791 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,791 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:36:09,793 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 13 ms
12:36:09,793 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,794 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@3eb91815 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@56dc1551, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,829 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-1, enlisted resources=[]]
12:36:09,829 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,829 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc"
12:36:09,838 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`SEQUENCE_NAME`" added to internal representation of table.
12:36:09,838 (main) DEBUG [DataNucleus.Datastore.Schema] - Attempt to find JDBC driver 'typeInfo' for jdbc-type=VARCHAR but sql-type=VARCHAR is not found. Using default sql-type for this jdbc-type.
12:36:09,838 (main) DEBUG [DataNucleus.Datastore.Schema] - Column "droit_onlinestore.`SEQUENCE_TABLE`.`NEXT_VAL`" added to internal representation of table.
12:36:09,839 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,839 (main) DEBUG [DataNucleus.Datastore.Schema] - Check of existence of droit_onlinestore.`SEQUENCE_TABLE` returned table type of TABLE
12:36:09,839 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@10f7f7de: SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=** NOT SPECIFIED ** FOR UPDATE" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
12:36:09,840 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT `NEXT_VAL` FROM droit_onlinestore.`SEQUENCE_TABLE` WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'> FOR UPDATE
12:36:09,840 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:36:09,840 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e"
12:36:09,840 (main) DEBUG [DataNucleus.Datastore.Native] - UPDATE droit_onlinestore.`SEQUENCE_TABLE` SET `NEXT_VAL`=(`NEXT_VAL`+<10>) WHERE `SEQUENCE_NAME`=<'com.metamagic.droit.eventsourcing.model.DomainEvent'>
12:36:09,840 (main) DEBUG [DataNucleus.Datastore.Persist] - SQL Execution Time = 0 ms (number of rows = 1) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
12:36:09,841 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@73a8da0f"
12:36:09,841 (main) DEBUG [DataNucleus.Datastore] - Closing PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@6bf08014"
12:36:09,841 (main) DEBUG [DataNucleus.ValueGeneration] - Reserved a block of 10 values
12:36:09,841 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,844 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5026735c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@1b45c0e, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,844 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=31
12:36:09,845 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,845 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="31") enlisted in transactional cache
12:36:09,850 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" being inserted into table "`DOMAIN_EVENT`"
12:36:09,853 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,854 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-1, enlisted resources=[]]
12:36:09,854 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828"
12:36:09,854 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,857 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,857 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,858 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'0a3aabf4-bfce-4c3c-a464-1d12b7e6d397'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","custId":"4a20a9e4-c1f7-4da5-a0b5-f59373f2a011"}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$CartCreatedEvent'>,<0>,<2017-10-06 12:36:09.828>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<31>)]
12:36:09,859 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@479ceda0"
12:36:09,859 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,860 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,860 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,860 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,860 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "31"
12:36:09,860 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,860 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="31") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,861 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,861 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,861 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,861 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="31") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,862 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-1, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@41294f8]]
12:36:09,862 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,864 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@44c73c26 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@41005828, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,865 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,865 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") was evicted from transactional cache
12:36:09,865 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 7 ms
12:36:09,866 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,866 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,866 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,867 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,867 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@74a6f9c1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb"
12:36:09,867 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,868 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:36:09,868 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
12:36:09,868 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,868 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,870 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,871 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@8e50104 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@37e4d7bb, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,871 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:09,889 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-2, enlisted resources=[]]
12:36:09,889 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,889 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6"
12:36:09,889 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=32
12:36:09,889 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,890 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="32") enlisted in transactional cache
12:36:09,890 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" being inserted into table "`DOMAIN_EVENT`"
12:36:09,890 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,890 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-2, enlisted resources=[]]
12:36:09,891 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517"
12:36:09,891 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,891 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,891 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,891 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'1a246a91-153d-45eb-b57a-9c7d891a4cd7'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","shopItem":{"itemId":"I1","name":"VU TV","quantity":1,"price":10000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<1>,<2017-10-06 12:36:09.889>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<32>)]
12:36:09,892 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@2421cc4"
12:36:09,892 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "32"
12:36:09,892 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="32") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,892 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,892 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="32") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,893 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-2, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@68702e03]]
12:36:09,893 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,895 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5be46f9d [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3f91b517, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,895 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,895 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") was evicted from transactional cache
12:36:09,895 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:36:09,895 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,896 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,896 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,896 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,896 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@56673b2c: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013"
12:36:09,896 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,897 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:36:09,897 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:36:09,897 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,897 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,897 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,898 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,898 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@58ce9668 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@172b013, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,898 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:09,903 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-3, enlisted resources=[]]
12:36:09,903 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,903 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54"
12:36:09,903 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=33
12:36:09,903 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,903 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="33") enlisted in transactional cache
12:36:09,903 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" being inserted into table "`DOMAIN_EVENT`"
12:36:09,904 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,904 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-3, enlisted resources=[]]
12:36:09,904 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722"
12:36:09,904 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,904 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,905 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,905 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'3b91cf1a-e7e2-4ed2-a578-2e88c4b23ffb'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","shopItem":{"itemId":"I2","name":"Watch","quantity":2,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<2>,<2017-10-06 12:36:09.903>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<33>)]
12:36:09,905 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 0 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@146dfe6"
12:36:09,905 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,905 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,905 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,905 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,905 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "33"
12:36:09,906 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,906 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="33") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,906 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,906 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,906 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,906 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="33") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,906 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-3, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@78641d23]]
12:36:09,906 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,909 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5f354bcf [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3daf7722, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,910 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,910 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") was evicted from transactional cache
12:36:09,910 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
12:36:09,910 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,911 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,911 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,911 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,912 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@7efaad5a: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4"
12:36:09,912 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,912 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:36:09,912 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:36:09,912 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,912 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,912 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,913 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,913 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,913 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@6af9fcb2 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6cce16f4, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,913 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:09,914 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-4, enlisted resources=[]]
12:36:09,914 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,914 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517"
12:36:09,914 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=34
12:36:09,914 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,914 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="34") enlisted in transactional cache
12:36:09,914 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" being inserted into table "`DOMAIN_EVENT`"
12:36:09,914 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,914 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-4, enlisted resources=[]]
12:36:09,915 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0"
12:36:09,915 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,915 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,915 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,915 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'a591ac1d-a2f4-4e11-8ea2-f1eb75656184'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","shopItem":{"itemId":"I3","name":"Painting","quantity":10,"price":5000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<3>,<2017-10-06 12:36:09.914>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<34>)]
12:36:09,916 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@7a362b6b"
12:36:09,916 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "34"
12:36:09,916 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="34") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,916 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,916 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="34") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,916 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-4, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@21337f7b]]
12:36:09,916 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,918 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5505ae1a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@73cd37c0, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,919 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,919 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") was evicted from transactional cache
12:36:09,919 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:36:09,919 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,919 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,919 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,919 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,920 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@1c93f6e1: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35"
12:36:09,920 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,920 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:36:09,920 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:36:09,920 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,920 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,920 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,921 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,921 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,921 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,921 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@512baff6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@632ceb35, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,921 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:09,922 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-5, enlisted resources=[]]
12:36:09,922 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,922 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961"
12:36:09,922 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=35
12:36:09,922 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,922 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="35") enlisted in transactional cache
12:36:09,922 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" being inserted into table "`DOMAIN_EVENT`"
12:36:09,923 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,923 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-5, enlisted resources=[]]
12:36:09,923 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f"
12:36:09,923 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,923 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,923 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,924 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'300bc1f5-eace-4ed2-8aab-4947eb310fcc'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","shopItem":{"itemId":"I4","name":"Table Lamp","quantity":25,"price":3000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemAddedEvent'>,<4>,<2017-10-06 12:36:09.922>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<35>)]
12:36:09,924 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@a4add54"
12:36:09,924 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,924 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,924 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,924 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,924 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "35"
12:36:09,925 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,925 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="35") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,925 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,925 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,925 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,925 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="35") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,925 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-5, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@60856961]]
12:36:09,925 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,927 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@5ddf0d24 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@363a52f, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,928 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,928 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") was evicted from transactional cache
12:36:09,928 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 5 ms
12:36:09,928 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,928 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,928 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,929 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,929 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@3adcc812: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f"
12:36:09,929 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,929 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 0 ms
12:36:09,929 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 1 ms
12:36:09,929 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,930 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,930 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,930 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@c9d0d6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6ccdb29f, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,931 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:09,932 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-6, enlisted resources=[]]
12:36:09,932 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,932 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad"
12:36:09,932 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=36
12:36:09,932 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,932 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="36") enlisted in transactional cache
12:36:09,932 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" being inserted into table "`DOMAIN_EVENT`"
12:36:09,932 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,932 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-6, enlisted resources=[]]
12:36:09,933 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e"
12:36:09,933 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,933 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,933 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,933 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'4d3f3a1c-92ea-43b2-a944-2745c77d053d'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","shopItem":{"itemId":"I2","name":"Item2","quantity":20,"price":7000.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemUpdatedEvent'>,<5>,<2017-10-06 12:36:09.932>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<36>)]
12:36:09,934 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@5ba88be8"
12:36:09,934 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "36"
12:36:09,934 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="36") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,934 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,934 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="36") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,934 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-6, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@5d066c7d]]
12:36:09,934 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,936 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@4b41dd5c [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@3b96c42e, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,936 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,936 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") was evicted from transactional cache
12:36:09,936 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 3 ms
12:36:09,937 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,937 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,937 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,938 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,938 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@66c92293: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be"
12:36:09,938 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,939 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:36:09,939 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
12:36:09,939 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,939 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,940 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,941 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@38089a5a [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@30e868be, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,941 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
12:36:09,943 (main) DEBUG [DataNucleus.Transaction] - Transaction created [DataNucleus Transaction, ID=416169932-7, enlisted resources=[]]
12:36:09,943 (main) DEBUG [DataNucleus.Transaction] - Transaction begun for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a (optimistic=false)
12:36:09,943 (main) DEBUG [DataNucleus.Persistence] - Making object persistent : "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b"
12:36:09,943 (main) DEBUG [DataNucleus.ValueGeneration] - Generated value for field "com.metamagic.droit.eventsourcing.model.DomainEvent.globalIndex" using strategy="increment" (Generator="org.datanucleus.store.rdbms.valuegenerator.TableGenerator") : value=37
12:36:09,943 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") added to Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,943 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="37") enlisted in transactional cache
12:36:09,943 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" being inserted into table "`DOMAIN_EVENT`"
12:36:09,944 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]" on resource "tx" with isolation level "read-committed" and auto-commit=false
12:36:09,944 (main) DEBUG [DataNucleus.Transaction] - Running enlist operation on resource: org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36, error code TMNOFLAGS and transaction [DataNucleus Transaction, ID=416169932-7, enlisted resources=[]]
12:36:09,945 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a"
12:36:09,945 (main) DEBUG [DataNucleus.Datastore.Persist] - The requested statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" has been made batchable
12:36:09,945 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") is having the value in field "timeStamp" replaced by a SCO wrapper
12:36:09,945 (main) DEBUG [DataNucleus.Datastore.Persist] - Batch has been added to statement "INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (?,?,?,?,?,?,?,?,?)" for processing (batch size = 1)
12:36:09,945 (main) DEBUG [DataNucleus.Datastore.Native] - BATCH [INSERT INTO `DOMAIN_EVENT` (`AGGREGATEIDENTIFIER`,`EVENTIDENTIFIER`,`PAYLOAD`,`PAYLOADREVISION`,`PAYLOADTYPE`,`SEQUENCENUMBER`,`TIMESTAMP`,`TYPE`,`GLOBALINDEX`) VALUES (<'c5df69e8-e387-401c-8838-644c406570cb'>,<'a45e4239-a8eb-4e55-85c5-e717e9c5e68f'>,<'{"cartId":"c5df69e8-e387-401c-8838-644c406570cb","shopItem":{"itemId":"I4","name":null,"quantity":0,"price":0.0}}'>,<null>,<'com.metamagic.desire.examples.event.ShoppingCartEvent$ItemRemovedEvent'>,<6>,<2017-10-06 12:36:09.943>,<'com.metamagic.desire.examples.aggregate.ShoppingCart'>,<37>)]
12:36:09,946 (main) DEBUG [DataNucleus.Datastore] - SQL Execution Time = 1 ms (number of rows = [1]) on PreparedStatement "org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3fed2870"
12:36:09,946 (main) DEBUG [DataNucleus.Transaction] - Transaction committing for ExecutionContext org.datanucleus.ExecutionContextImpl@5e82df6a
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 1 enlisted objects
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : START
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - Performing reachability algorithm on object with id "37"
12:36:09,946 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="37") lifecycle state "P_NEW" added to the list of reachables on commit.
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() START : using ordered flush - 0 enlisted objects
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - ExecutionContext.internalFlush() END
12:36:09,946 (main) DEBUG [DataNucleus.Persistence] - Persistence-By-Reachability (commit) : END
12:36:09,946 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="37") added to Level 2 cache (fields="[0, 1, 2, 3, 4, 5, 6, 7, 8]", version="")
12:36:09,946 (main) DEBUG [DataNucleus.Transaction] - Committing [DataNucleus Transaction, ID=416169932-7, enlisted resources=[org.datanucleus.store.rdbms.ConnectionFactoryImpl$EmulatedXAResource@39de3d36]]
12:36:09,946 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,949 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@673be18f [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@6581dc0a, commitOnRelease=false, closeOnRelease=false, closeOnTxnEnd=true]"
12:36:09,949 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") has a lifecycle change : "P_NEW"->"HOLLOW"
12:36:09,949 (main) DEBUG [DataNucleus.Transaction] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") was evicted from transactional cache
12:36:09,949 (main) DEBUG [DataNucleus.Transaction] - Transaction committed in 4 ms
12:36:09,949 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" has been run before so reusing existing generic compilation
12:36:09,949 (main) DEBUG [DataNucleus.Query] - Query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier FetchPlan [default]" of language "JDOQL" for datastore "rdbms-mysql" has been run before so reusing existing datastore compilation
12:36:09,949 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Executing "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" ...
12:36:09,950 (main) DEBUG [DataNucleus.Connection] - ManagedConnection OPENED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]" on resource "nontx" with isolation level "read-committed" and auto-commit=false
12:36:09,950 (main) DEBUG [DataNucleus.Datastore] - Using PreparedStatement "com.mysql.jdbc.JDBC42PreparedStatement@598bd2ba: SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = ** NOT SPECIFIED **" for connection "org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3"
12:36:09,950 (main) DEBUG [DataNucleus.Datastore.Native] - SELECT 'com.metamagic.droit.eventsourcing.model.DomainEvent' AS `DN_TYPE`,`A0`.`AGGREGATEIDENTIFIER`,`A0`.`EVENTIDENTIFIER`,`A0`.`GLOBALINDEX`,`A0`.`PAYLOAD`,`A0`.`PAYLOADREVISION`,`A0`.`PAYLOADTYPE`,`A0`.`SEQUENCENUMBER`,`A0`.`TIMESTAMP`,`A0`.`TYPE` FROM `DOMAIN_EVENT` `A0` WHERE `A0`.`AGGREGATEIDENTIFIER` = <'c5df69e8-e387-401c-8838-644c406570cb'>
12:36:09,951 (main) DEBUG [DataNucleus.Datastore.Retrieve] - SQL Execution Time = 1 ms
12:36:09,951 (main) DEBUG [DataNucleus.Query] - JDOQL Query : Execution Time = 2 ms
12:36:09,951 (main) DEBUG [DataNucleus.Connection] - ManagedConnection COMMITTING : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,951 (main) DEBUG [DataNucleus.Query] - Reading in results for query "SELECT FROM com.metamagic.droit.eventsourcing.model.DomainEvent WHERE aggregateIdentifier==:aggregateIdentifier" since the connection used is closing/committing
12:36:09,951 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1ae8bcbc" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:31") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,951 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@479460a6" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:32") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,951 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@7582ff54" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:33") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,951 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1046d517" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:34") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,951 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@10a9d961" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:35") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,951 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@265adfad" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:36") taken from Level 1 cache (loadedFlags="[YYYYYYYYY]")
12:36:09,952 (main) DEBUG [DataNucleus.Cache] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") taken from Level 1 cache (loadedFlags="[NNYNNNNNN]")
12:36:09,952 (main) DEBUG [DataNucleus.Connection] - ManagedConnection CLOSED : "org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@764faa6 [conn=org.datanucleus.store.rdbms.datasource.dbcp2.PoolingDataSource$PoolGuardConnectionWrapper@4c1f22f3, commitOnRelease=true, closeOnRelease=true, closeOnTxnEnd=true]"
12:36:09,956 (main) DEBUG [DataNucleus.Lifecycle] - Object "com.metamagic.droit.eventsourcing.model.DomainEvent@1c33c17b" (id="com.metamagic.droit.eventsourcing.model.DomainEvent:37") has a lifecycle change : "HOLLOW"->"P_NONTRANS"
